# üöÄ –í–´–ü–û–õ–ù–ò–¢–ï –≠–¢–ò –ö–û–ú–ê–ù–î–´ –ù–ê –°–ï–†–í–ï–†–ï

## –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh vladimir@your-server.com
# –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

## –®–∞–≥ 2: –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /var/www/html/mi_core_etl
# –∏–ª–∏ –≤–∞—à –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
```

## –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (–≤–∫–ª—é—á–∞—è —Å–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è)

```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è–µ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞ –¥–ª—è git –æ–ø–µ—Ä–∞—Ü–∏–π
sudo chown -R vladimir:vladimir .

# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –Ω–æ–≤—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
git pull origin main

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
chmod +x *.sh

# –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞
sudo chown -R www-data:www-data .
sudo chown -R vladimir:www-data logs/ cache/ storage/ 2>/dev/null || true
```

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø–æ–¥ –≤–∞—à —Å–µ—Ä–≤–µ—Ä

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä
./configure_deployment.sh

# –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
# - Project directory: /var/www/html/mi_core_etl (–∏–ª–∏ –≤–∞—à –ø—É—Ç—å)
# - Maintenance user: vladimir (–∏–ª–∏ –≤–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
# - Web server user: www-data (–∏–ª–∏ nginx/apache)
# - Web server group: www-data (–∏–ª–∏ nginx/apache)
```

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π
sudo ./safe_deploy.sh
```

## –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –µ—Å–ª–∏ –µ—Å—Ç—å, –æ–Ω–∏ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ git stash
2. ‚úÖ **Git pull** - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
4. ‚úÖ **Composer** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ PHP –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
5. ‚úÖ **Frontend build** - —Å–±–æ—Ä–∫–∞ React/TypeScript –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
6. ‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ —Ñ–∞–π–ª–æ–≤
7. ‚úÖ **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤** - nginx/apache –∏ PHP-FPM
8. ‚úÖ **Smoke tests** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

## –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞
curl -I http://your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://your-domain.com/api/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ETL —Å–∏—Å—Ç–µ–º—ã
php monitor_analytics_etl.php

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f logs/analytics_etl/etl_$(date +%Y%m%d).log
```

## –ï—Å–ª–∏ –±—ã–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ git stash. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤—ã –º–æ–∂–µ—Ç–µ:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
sudo -u vladimir git stash show -p

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Ö –æ–±—Ä–∞—Ç–Ω–æ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo -u vladimir git stash pop

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã
sudo -u vladimir git stash drop
```

## –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:

```bash
# –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É
sudo chown -R vladimir:vladimir .
sudo -u vladimir git log --oneline -5
sudo -u vladimir git reset --hard PREVIOUS_COMMIT_HASH
sudo chown -R www-data:www-data .
sudo systemctl reload nginx
```

---

## üéØ –ì–æ—Ç–æ–≤—ã? –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

**–í–∞–∂–Ω–æ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º vladimir (–∏–ª–∏ –≤–∞—à–∏–º maintenance –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º) –∏ –ø—Ä–∞–≤–∞ sudo.
