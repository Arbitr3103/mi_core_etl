# –§–∏–ª—å—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –≤ –¥–∞—à–±–æ—Ä–¥–µ —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤. –¢–µ–ø–µ—Ä—å –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º:

-   **–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã** - —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ > 0
-   **–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã** - —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ = 0
-   **–í—Å–µ —Ç–æ–≤–∞—Ä—ã** - –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API

### –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `activity_filter`

–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `activity_filter` –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è:

-   `active` - —Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ > 0 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
-   `inactive` - —Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ = 0
-   `all` - –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

```
GET /api/inventory-analytics.php?action=dashboard&activity_filter=active
GET /api/inventory-analytics.php?action=critical-products&activity_filter=inactive
GET /api/inventory-analytics.php?action=overstock-products&activity_filter=all
```

### –ù–æ–≤—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–≤–µ—Ç–µ

–í –æ—Ç–≤–µ—Ç–µ API –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `activity_stats`:

```json
{
  "status": "success",
  "data": { ... },
  "metadata": {
    "activity_filter": "active",
    "activity_stats": {
      "active_count": 245,
      "inactive_count": 26,
      "total_count": 271,
      "active_percentage": 90.41,
      "inactive_percentage": 9.59
    }
  }
}
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞—à–±–æ—Ä–¥–µ

### –ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

–î–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏:

-   ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ (–æ—Å—Ç–∞—Ç–∫–∏ > 0)
-   ‚ùå –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ (–æ—Å—Ç–∞—Ç–∫–∏ = 0)
-   üìã –í—Å–µ —Ç–æ–≤–∞—Ä—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö, –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤.

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:

-   –û—Å–Ω–æ–≤–Ω–æ–π –¥–∞—à–±–æ—Ä–¥
-   –°–ø–∏—Å–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
-   –°–ø–∏—Å–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–∑–±—ã—Ç–∫–æ–º
-   –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ–∫—Ü–∏–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

-   `api/inventory-analytics.php` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
-   `tests/Integration/test_dashboard.html` - –æ–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞—à–±–æ—Ä–¥–∞

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:

-   `test_activity_filter.html` - —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
-   `ACTIVITY_FILTER_README.md` - –¥–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `test_activity_filter.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

-   –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
-   –í–∏–¥–µ—Ç—å –æ—Ç–≤–µ—Ç—ã API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
-   –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
-   –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°—Ç–∞—Ä—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `active_only` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `activity_filter` –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.

–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω –Ω–∏ –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (`activity_filter=active`).

## –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

```php
switch ($activityFilter) {
    case 'active':
        // –¢–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ > 0
        return " AND i.current_stock > 0 ";

    case 'inactive':
        // –¢–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ = 0
        return " AND i.current_stock = 0 ";

    case 'all':
        // –í—Å–µ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
        return " ";

    default:
        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
        return " AND i.current_stock > 0 ";
}
```

## –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö—ç—à-–∫–ª—é—á–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —É—á–µ—Ç–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

-   `dashboard_active_limit_10`
-   `dashboard_inactive_limit_10`
-   `dashboard_all_limit_10`

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ.
