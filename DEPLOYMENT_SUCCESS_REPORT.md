# üéâ –û—Ç—á–µ—Ç –æ–± —É—Å–ø–µ—à–Ω–æ–º –¥–µ–ø–ª–æ–µ Activity Filter

## ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:

### 1. **Activity Filter —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**

-   **–ë—ã–ª–æ:** 271 —Ç–æ–≤–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π
-   **–°—Ç–∞–ª–æ:** 271 —Ç–æ–≤–∞—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—ã–π
-   **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—Å—Ç–∞—Ç–∫–æ–≤

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL**

-   **–ë—ã–ª–æ:** API –ø—ã—Ç–∞–ª—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å MySQL –∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
-   **–°—Ç–∞–ª–æ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL –∏ —Ç–∞–±–ª–∏—Ü–µ–π `inventory`
-   **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π config.php –¥–ª—è PostgreSQL

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π**

-   **–ë—ã–ª–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –ø–æ–ª—è `current_stock`, `stock` (–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç)
-   **–°—Ç–∞–ª–æ:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—è `quantity_present`, `available`, `preparing_for_sale`, `in_requests`, `in_transit`
-   **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã

### 4. **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π**

-   **–ë—ã–ª–æ:** –û—à–∏–±–∫–∏ "Cannot redeclare function"
-   **–°—Ç–∞–ª–æ:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
-   **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `function_exists()`

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### –§–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. **`/var/www/market-mi.ru/config.php`** - PostgreSQL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
2. **`/var/www/market-mi.ru/api/inventory-analytics.php`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π API
3. **`/var/www/market-mi.ru/api/inventory_cache_manager.php`** - –∫—ç—à –º–µ–Ω–µ–¥–∂–µ—Ä
4. **`/var/www/market-mi.ru/api/performance_monitor.php`** - –º–æ–Ω–∏—Ç–æ—Ä –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ SQL:

```sql
-- –ë–´–õ–û:
COALESCE(i.current_stock, i.stock, 0) > 0

-- –°–¢–ê–õ–û:
(COALESCE(i.quantity_present, 0) + COALESCE(i.available, 0) +
 COALESCE(i.preparing_for_sale, 0) + COALESCE(i.in_requests, 0) +
 COALESCE(i.in_transit, 0)) > 0
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### API Endpoints —Ä–∞–±–æ—Ç–∞—é—Ç:

-   ‚úÖ `https://www.market-mi.ru/api/inventory-analytics.php?action=dashboard&activity_filter=all`
-   ‚úÖ `https://www.market-mi.ru/api/inventory-analytics.php?action=dashboard&activity_filter=active`
-   ‚úÖ `https://www.market-mi.ru/api/inventory-analytics.php?action=dashboard&activity_filter=inactive`

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

-   **–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤:** 271
-   **–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤:** 271 (—Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –≤ –ª—é–±–æ–º —Å—Ç–∞—Ç—É—Å–µ)
-   **–ù–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤:** 0
-   **–ü—Ä–æ—Ü–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:** 100%

### –¢–∏–ø—ã –æ—Å—Ç–∞—Ç–∫–æ–≤ –≤ –±–∞–∑–µ:

-   **–ì–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –ø—Ä–æ–¥–∞–∂–µ:** 2,734 –µ–¥–∏–Ω–∏—Ü
-   **–í –∑–∞—è–≤–∫–∞—Ö:** 1,306 –µ–¥–∏–Ω–∏—Ü
-   **–í –ø—É—Ç–∏:** 2,078 –µ–¥–∏–Ω–∏—Ü
-   **–î–æ—Å—Ç—É–ø–Ω–æ:** 0 –µ–¥–∏–Ω–∏—Ü
-   **–ù–∞ —Å–∫–ª–∞–¥–µ:** 0 –µ–¥–∏–Ω–∏—Ü

## üåê –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

**–î–∞—à–±–æ—Ä–¥ –¥–æ—Å—Ç—É–ø–µ–Ω:** https://www.market-mi.ru/warehouse-dashboard/

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –¥–∞—à–±–æ—Ä–¥–µ:

-   ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç 271 –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–≤–∞—Ä (–≤–º–µ—Å—Ç–æ 0)
-   ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
-   ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–∫–ª–∞–¥–æ–≤
-   ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
-   ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ –≤—Å–µ–º —Ç–∏–ø–∞–º –æ—Å—Ç–∞—Ç–∫–æ–≤

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:

–¢–æ–≤–∞—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è **–∞–∫—Ç–∏–≤–Ω—ã–º**, –µ—Å–ª–∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ –≤ –ª—é–±–æ–º –∏–∑ –ø–æ–ª–µ–π:

-   `quantity_present` - —Ç–æ–≤–∞—Ä –Ω–∞ —Å–∫–ª–∞–¥–µ
-   `available` - –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏
-   `preparing_for_sale` - –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –ø—Ä–æ–¥–∞–∂–µ
-   `in_requests` - –≤ –∑–∞—è–≤–∫–∞—Ö
-   `in_transit` - –≤ –ø—É—Ç–∏

–¢–æ–≤–∞—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è **–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º**, –µ—Å–ª–∏ –≤—Å–µ —ç—Ç–∏ –ø–æ–ª—è —Ä–∞–≤–Ω—ã 0.

---

**üéØ –ò—Ç–æ–≥:** Activity Filter –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–∞ production!
