{"version":3,"file":"WarehouseDashboardPage-CyQaM3TT.js","sources":["../../../src/components/warehouse/LiquidityBadge.tsx","../../../src/components/warehouse/ReplenishmentIndicator.tsx","../../../src/components/warehouse/MetricsTooltip.tsx","../../../src/components/warehouse/WarehouseFilters.tsx","../../../src/components/warehouse/WarehouseTable.tsx","../../../src/components/warehouse/DashboardHeader.tsx","../../../src/components/warehouse/Pagination.tsx","../../../src/services/api.ts","../../../src/services/warehouse.ts","../../../src/hooks/useWarehouse.ts","../../../src/pages/WarehouseDashboardPage.tsx"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport type { LiquidityStatus } from \"../../types/warehouse\";\n\nexport interface LiquidityBadgeProps {\n  status: LiquidityStatus;\n  daysOfStock: number | null;\n}\n\n/**\n * LiquidityBadge component with memoization\n * Displays liquidity status with color-coded badge\n *\n * Requirements: 5, 7, 12\n */\nexport const LiquidityBadge: React.FC<LiquidityBadgeProps> = React.memo(\n  ({ status, daysOfStock }) => {\n    const colors: Record<LiquidityStatus, string> = {\n      critical: \"bg-red-100 text-red-800 border-red-300\",\n      low: \"bg-yellow-100 text-yellow-800 border-yellow-300\",\n      normal: \"bg-green-100 text-green-800 border-green-300\",\n      excess: \"bg-blue-100 text-blue-800 border-blue-300\",\n    };\n\n    const labels: Record<LiquidityStatus, string> = {\n      critical: \"–î–µ—Ñ–∏—Ü–∏—Ç\",\n      low: \"–ù–∏–∑–∫–∏–π\",\n      normal: \"–ù–æ—Ä–º–∞\",\n      excess: \"–ò–∑–±—ã—Ç–æ–∫\",\n    };\n\n    // Memoize formatted days calculation\n    const formattedDays = useMemo(() => {\n      if (daysOfStock === null) return \"‚àû\";\n      return `${Math.round(daysOfStock)} –¥–Ω.`;\n    }, [daysOfStock]);\n\n    return (\n      <span\n        className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${colors[status]}`}\n      >\n        {labels[status]}\n        {daysOfStock !== null && (\n          <span className=\"ml-1 font-semibold\">({formattedDays})</span>\n        )}\n      </span>\n    );\n  }\n);\n","import React, { useMemo } from \"react\";\n\nexport interface ReplenishmentIndicatorProps {\n  need: number;\n  targetStock: number;\n}\n\n/**\n * ReplenishmentIndicator component with memoization\n * Displays replenishment need with urgency indicator\n *\n * Requirements: 3, 12\n */\nexport const ReplenishmentIndicator: React.FC<ReplenishmentIndicatorProps> =\n  React.memo(({ need, targetStock }) => {\n    // Memoize urgency calculation\n    const isUrgent = useMemo(() => {\n      const percentage = targetStock > 0 ? (need / targetStock) * 100 : 0;\n      return percentage > 50;\n    }, [need, targetStock]);\n\n    if (need <= 0) {\n      return (\n        <span className=\"inline-flex items-center text-green-600 font-medium\">\n          <svg\n            className=\"w-4 h-4 mr-1\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n              clipRule=\"evenodd\"\n            />\n          </svg>\n          –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ\n        </span>\n      );\n    }\n\n    // Memoize formatted need\n    const formattedNeed = useMemo(() => {\n      return need.toLocaleString(\"ru-RU\");\n    }, [need]);\n\n    return (\n      <div\n        className={`inline-flex items-center font-semibold ${\n          isUrgent ? \"text-red-600\" : \"text-orange-600\"\n        }`}\n      >\n        <span>{formattedNeed} —à—Ç.</span>\n        {isUrgent && (\n          <span className=\"ml-1\" title=\"–°—Ä–æ—á–Ω–æ! –ë–æ–ª–µ–µ 50% –æ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ –∑–∞–ø–∞—Å–∞\">\n            üî•\n          </span>\n        )}\n      </div>\n    );\n  });\n","import React, { useState, useMemo } from \"react\";\nimport type { WarehouseItem } from \"../../types/warehouse\";\n\nexport interface MetricsTooltipProps {\n  item: WarehouseItem;\n  children: React.ReactNode;\n}\n\n/**\n * MetricsTooltip component with memoization\n * Displays detailed Ozon metrics in a tooltip\n *\n * Requirements: 6, 12\n */\nexport const MetricsTooltip: React.FC<MetricsTooltipProps> = React.memo(\n  ({ item, children }) => {\n    const [isVisible, setIsVisible] = useState(false);\n\n    // Memoize metrics calculation\n    const visibleMetrics = useMemo(() => {\n      const metrics = [\n        {\n          label: \"–î–æ—Å—Ç—É–ø–Ω–æ –∫ –ø—Ä–æ–¥–∞–∂–µ\",\n          value: item.available,\n          color: \"text-gray-700\",\n        },\n        {\n          label: \"–ì–æ—Ç–æ–≤–∏–º –∫ –ø—Ä–æ–¥–∞–∂–µ\",\n          value: item.preparing_for_sale,\n          color: \"text-blue-600\",\n        },\n        {\n          label: \"–í –∑–∞—è–≤–∫–∞—Ö –Ω–∞ –ø–æ—Å—Ç–∞–≤–∫—É\",\n          value: item.in_supply_requests,\n          color: \"text-purple-600\",\n        },\n        {\n          label: \"–í –ø–æ—Å—Ç–∞–≤–∫–∞—Ö –≤ –ø—É—Ç–∏\",\n          value: item.in_transit,\n          color: \"text-indigo-600\",\n        },\n        {\n          label: \"–ü—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É\",\n          value: item.in_inspection,\n          color: \"text-yellow-600\",\n        },\n        {\n          label: \"–í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π\",\n          value: item.returning_from_customers,\n          color: \"text-orange-600\",\n        },\n        {\n          label: \"–ò—Å—Ç–µ–∫–∞–µ—Ç —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏\",\n          value: item.expiring_soon,\n          color: \"text-red-600\",\n          highlight: item.expiring_soon > 0,\n        },\n        {\n          label: \"–ë—Ä–∞–∫, –¥–æ—Å—Ç—É–ø–Ω—ã–π –∫ –≤—ã–≤–æ–∑—É\",\n          value: item.defective,\n          color: \"text-red-500\",\n          highlight: item.defective > 0,\n        },\n        {\n          label: \"–ò–∑–±—ã—Ç–æ–∫ –æ—Ç –ø–æ—Å—Ç–∞–≤–∫–∏\",\n          value: item.excess_from_supply,\n          color: \"text-gray-600\",\n        },\n        {\n          label: \"–û–∂–∏–¥–∞—é—Ç –£–ü–î\",\n          value: item.awaiting_upd,\n          color: \"text-gray-600\",\n        },\n        {\n          label: \"–ì–æ—Ç–æ–≤—è—Ç—Å—è –∫ –≤—ã–≤–æ–∑—É\",\n          value: item.preparing_for_removal,\n          color: \"text-gray-600\",\n        },\n      ];\n\n      // Filter out zero values unless they're highlighted\n      return metrics.filter((m) => m.value > 0 || m.highlight);\n    }, [item]);\n\n    return (\n      <div className=\"relative inline-block\">\n        <div\n          onMouseEnter={() => setIsVisible(true)}\n          onMouseLeave={() => setIsVisible(false)}\n          className=\"cursor-help\"\n        >\n          {children}\n        </div>\n\n        {isVisible && (\n          <div className=\"absolute z-50 w-72 p-4 bg-white border border-gray-300 rounded-lg shadow-xl bottom-full left-1/2 transform -translate-x-1/2 mb-2\">\n            <div className=\"text-sm font-semibold text-gray-900 mb-3 border-b pb-2\">\n              –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ Ozon\n            </div>\n            <div className=\"space-y-2\">\n              {visibleMetrics.length > 0 ? (\n                visibleMetrics.map((metric, index) => (\n                  <div\n                    key={index}\n                    className={`flex justify-between items-center ${\n                      metric.highlight\n                        ? \"bg-red-50 -mx-2 px-2 py-1 rounded\"\n                        : \"\"\n                    }`}\n                  >\n                    <span className=\"text-xs text-gray-600\">\n                      {metric.label}:\n                    </span>\n                    <span\n                      className={`text-xs font-semibold ${metric.color} ${\n                        metric.highlight ? \"animate-pulse\" : \"\"\n                      }`}\n                    >\n                      {metric.value.toLocaleString(\"ru-RU\")}\n                    </span>\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-xs text-gray-500 italic\">\n                  –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫\n                </div>\n              )}\n            </div>\n\n            {/* Arrow pointer */}\n            <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1\">\n              <div className=\"w-3 h-3 bg-white border-b border-r border-gray-300 transform rotate-45\"></div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n","import React from \"react\";\nimport type {\n  FilterState,\n  LiquidityStatus,\n  WarehouseListItem,\n  ClusterListItem,\n} from \"../../types/warehouse\";\n\nexport interface WarehouseFiltersProps {\n  filters: FilterState;\n  onChange: (filters: FilterState) => void;\n  warehouses?: WarehouseListItem[];\n  clusters?: ClusterListItem[];\n}\n\nexport const WarehouseFilters: React.FC<WarehouseFiltersProps> = ({\n  filters,\n  onChange,\n  warehouses = [],\n  clusters = [],\n}) => {\n  const liquidityOptions: { value: LiquidityStatus; label: string }[] = [\n    { value: \"critical\", label: \"–î–µ—Ñ–∏—Ü–∏—Ç\" },\n    { value: \"low\", label: \"–ù–∏–∑–∫–∏–π –∑–∞–ø–∞—Å\" },\n    { value: \"normal\", label: \"–ù–æ—Ä–º–∞\" },\n    { value: \"excess\", label: \"–ò–∑–±—ã—Ç–æ–∫\" },\n  ];\n\n  const handleWarehouseChange = (value: string) => {\n    onChange({\n      ...filters,\n      warehouse: value === \"\" ? undefined : value,\n    });\n  };\n\n  const handleClusterChange = (value: string) => {\n    onChange({\n      ...filters,\n      cluster: value === \"\" ? undefined : value,\n    });\n  };\n\n  const handleLiquidityStatusChange = (value: string) => {\n    onChange({\n      ...filters,\n      liquidity_status: value === \"\" ? undefined : (value as LiquidityStatus),\n    });\n  };\n\n  const handleActiveOnlyChange = (checked: boolean) => {\n    onChange({\n      ...filters,\n      active_only: checked,\n    });\n  };\n\n  const handleReplenishmentNeedChange = (checked: boolean) => {\n    onChange({\n      ...filters,\n      has_replenishment_need: checked ? true : undefined,\n    });\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow p-6\">\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">–§–∏–ª—å—Ç—Ä—ã</h3>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {/* Warehouse filter */}\n        <div className=\"flex flex-col\">\n          <label\n            htmlFor=\"warehouse-filter\"\n            className=\"text-sm font-medium text-gray-700 mb-2\"\n          >\n            –°–∫–ª–∞–¥\n          </label>\n          <select\n            id=\"warehouse-filter\"\n            value={filters.warehouse || \"\"}\n            onChange={(e) => handleWarehouseChange(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          >\n            <option value=\"\">–í—Å–µ —Å–∫–ª–∞–¥—ã</option>\n            {warehouses.map((warehouse) => (\n              <option\n                key={warehouse.warehouse_name}\n                value={warehouse.warehouse_name}\n              >\n                {warehouse.warehouse_name} ({warehouse.cluster})\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Cluster filter */}\n        <div className=\"flex flex-col\">\n          <label\n            htmlFor=\"cluster-filter\"\n            className=\"text-sm font-medium text-gray-700 mb-2\"\n          >\n            –ö–ª–∞—Å—Ç–µ—Ä\n          </label>\n          <select\n            id=\"cluster-filter\"\n            value={filters.cluster || \"\"}\n            onChange={(e) => handleClusterChange(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          >\n            <option value=\"\">–í—Å–µ –∫–ª–∞—Å—Ç–µ—Ä—ã</option>\n            {clusters.map((cluster) => (\n              <option key={cluster.cluster} value={cluster.cluster}>\n                {cluster.cluster} ({cluster.warehouse_count} —Å–∫–ª–∞–¥–æ–≤)\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Liquidity status filter */}\n        <div className=\"flex flex-col\">\n          <label\n            htmlFor=\"liquidity-filter\"\n            className=\"text-sm font-medium text-gray-700 mb-2\"\n          >\n            –°—Ç–∞—Ç—É—Å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏\n          </label>\n          <select\n            id=\"liquidity-filter\"\n            value={filters.liquidity_status || \"\"}\n            onChange={(e) => handleLiquidityStatusChange(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          >\n            <option value=\"\">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>\n            {liquidityOptions.map((option) => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Checkboxes - moved into grid */}\n        <div className=\"flex flex-col justify-end gap-2\">\n          <div className=\"flex items-center\">\n            <label className=\"inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={filters.active_only}\n                onChange={(e) => handleActiveOnlyChange(e.target.checked)}\n                className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500\"\n              />\n              <span className=\"ml-2 text-sm font-medium text-gray-700\">\n                –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ\n              </span>\n            </label>\n          </div>\n          <div className=\"flex items-center\">\n            <label className=\"inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={filters.has_replenishment_need || false}\n                onChange={(e) =>\n                  handleReplenishmentNeedChange(e.target.checked)\n                }\n                className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500\"\n              />\n              <span className=\"ml-2 text-sm font-medium text-gray-700\">\n                –ù—É–∂–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ\n              </span>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useMemo, useRef } from \"react\";\nimport { useVirtualizer } from \"@tanstack/react-virtual\";\nimport type {\n  WarehouseGroup,\n  WarehouseItem,\n  SortConfig,\n  SortField,\n  SortOrder,\n} from \"../../types/warehouse\";\nimport { LiquidityBadge } from \"./LiquidityBadge\";\nimport { ReplenishmentIndicator } from \"./ReplenishmentIndicator\";\nimport { MetricsTooltip } from \"./MetricsTooltip\";\n\nexport interface WarehouseTableProps {\n  data: WarehouseGroup[];\n  sortConfig: SortConfig;\n  onSort: (config: SortConfig) => void;\n}\n\n// Row types for virtualization\ntype TableRow =\n  | { type: \"warehouse-header\"; warehouse: WarehouseGroup }\n  | { type: \"item\"; item: WarehouseItem; warehouse: WarehouseGroup }\n  | { type: \"warehouse-footer\"; warehouse: WarehouseGroup };\n\nexport const WarehouseTable: React.FC<WarehouseTableProps> = ({\n  data,\n  sortConfig,\n  onSort,\n}) => {\n  const parentRef = useRef<HTMLDivElement>(null);\n\n  // Flatten data structure for virtualization\n  const rows = useMemo<TableRow[]>(() => {\n    const flatRows: TableRow[] = [];\n\n    data.forEach((warehouse) => {\n      // Add warehouse header\n      flatRows.push({ type: \"warehouse-header\", warehouse });\n\n      // Add items\n      warehouse.items.forEach((item) => {\n        flatRows.push({ type: \"item\", item, warehouse });\n      });\n\n      // Add warehouse footer\n      flatRows.push({ type: \"warehouse-footer\", warehouse });\n    });\n\n    return flatRows;\n  }, [data]);\n\n  // Calculate total item count\n  const totalItems = useMemo(() => {\n    return data.reduce((sum, warehouse) => sum + warehouse.items.length, 0);\n  }, [data]);\n\n  // Use virtualization only for large datasets (> 50 items)\n  const shouldVirtualize = totalItems > 50;\n\n  // Setup virtualizer\n  const virtualizer = useVirtualizer({\n    count: rows.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: (index) => {\n      const row = rows[index];\n      if (row.type === \"warehouse-header\" || row.type === \"warehouse-footer\") {\n        return 48; // Header/footer height\n      }\n      return 72; // Item row height\n    },\n    overscan: 5,\n    enabled: shouldVirtualize,\n  });\n  const handleSort = (field: SortField) => {\n    const newOrder: SortOrder =\n      sortConfig.field === field && sortConfig.order === \"asc\" ? \"desc\" : \"asc\";\n    onSort({ field, order: newOrder });\n  };\n\n  const getSortIcon = (field: SortField) => {\n    if (sortConfig.field !== field) {\n      return (\n        <svg\n          className=\"w-4 h-4 ml-1 text-gray-400\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\"\n          />\n        </svg>\n      );\n    }\n\n    return sortConfig.order === \"asc\" ? (\n      <svg\n        className=\"w-4 h-4 ml-1 text-primary-600\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          strokeWidth={2}\n          d=\"M5 15l7-7 7 7\"\n        />\n      </svg>\n    ) : (\n      <svg\n        className=\"w-4 h-4 ml-1 text-primary-600\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          strokeWidth={2}\n          d=\"M19 9l-7 7-7-7\"\n        />\n      </svg>\n    );\n  };\n\n  // Render row component\n  const renderRow = (row: TableRow) => {\n    if (row.type === \"warehouse-header\") {\n      return (\n        <tr className=\"bg-gray-100 font-semibold\">\n          <td\n            colSpan={7}\n            className=\"px-6 py-3 text-sm text-gray-900 border-t-2 border-gray-300\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <span>\n                {row.warehouse.warehouse_name}\n                <span className=\"ml-2 text-xs font-normal text-gray-600\">\n                  ({row.warehouse.cluster})\n                </span>\n              </span>\n              <span className=\"text-xs font-normal text-gray-600\">\n                {row.warehouse.totals.total_items} —Ç–æ–≤–∞—Ä–æ–≤\n              </span>\n            </div>\n          </td>\n        </tr>\n      );\n    }\n\n    if (row.type === \"warehouse-footer\") {\n      return (\n        <tr className=\"bg-gray-50 font-semibold border-b-2 border-gray-300\">\n          <td\n            colSpan={2}\n            className=\"px-6 py-3 text-sm text-gray-900 text-right\"\n          >\n            –ò—Ç–æ–≥–æ –ø–æ —Å–∫–ª–∞–¥—É:\n          </td>\n          <td className=\"px-6 py-3 text-sm text-gray-900 text-right\">\n            {row.warehouse.totals.total_available.toLocaleString(\"ru-RU\")}\n          </td>\n          <td className=\"px-6 py-3\"></td>\n          <td className=\"px-6 py-3\"></td>\n          <td className=\"px-6 py-3 text-sm text-gray-900 text-right\">\n            {row.warehouse.totals.total_replenishment_need.toLocaleString(\n              \"ru-RU\"\n            )}{\" \"}\n            —à—Ç.\n          </td>\n          <td className=\"px-6 py-3\"></td>\n        </tr>\n      );\n    }\n\n    // Item row\n    const { item, warehouse } = row;\n    return (\n      <tr\n        key={`${item.product_id}-${item.warehouse_name}`}\n        className=\"hover:bg-gray-50 transition-colors\"\n      >\n        <td className=\"px-6 py-4\">\n          <div className=\"text-sm font-medium text-gray-900 truncate max-w-xs\">\n            {item.name}\n          </div>\n          <div className=\"text-xs text-gray-500 truncate\">{item.sku}</div>\n        </td>\n        <td className=\"px-6 py-4 text-sm text-gray-700\">\n          <div className=\"truncate max-w-xs\">{warehouse.warehouse_name}</div>\n        </td>\n        <td className=\"px-6 py-4 text-right\">\n          <MetricsTooltip item={item}>\n            <span className=\"text-sm font-semibold text-gray-900 cursor-help border-b border-dashed border-gray-400 whitespace-nowrap\">\n              {item.available.toLocaleString(\"ru-RU\")}\n            </span>\n          </MetricsTooltip>\n        </td>\n        <td className=\"px-6 py-4 text-right text-sm text-gray-700 whitespace-nowrap\">\n          {item.daily_sales_avg.toFixed(2)}\n        </td>\n        <td className=\"px-6 py-4 text-right text-sm text-gray-700 whitespace-nowrap\">\n          {item.days_of_stock !== null ? Math.round(item.days_of_stock) : \"‚àû\"}\n        </td>\n        <td className=\"px-6 py-4 text-right\">\n          <ReplenishmentIndicator\n            need={item.replenishment_need}\n            targetStock={item.target_stock}\n          />\n        </td>\n        <td className=\"px-6 py-4\">\n          <LiquidityBadge\n            status={item.liquidity_status}\n            daysOfStock={item.days_of_stock}\n          />\n        </td>\n      </tr>\n    );\n  };\n\n  if (!data || data.length === 0) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-md p-8 text-center\">\n        <p className=\"text-gray-500\">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n      <div\n        ref={parentRef}\n        className=\"overflow-x-auto\"\n        style={{\n          maxHeight: shouldVirtualize ? \"800px\" : \"none\",\n          overflowY: shouldVirtualize ? \"auto\" : \"visible\",\n        }}\n      >\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50 sticky top-28 z-10\">\n            <tr>\n              <th\n                onClick={() => handleSort(\"name\")}\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 whitespace-nowrap\"\n              >\n                <div className=\"flex items-center\">\n                  –¢–æ–≤–∞—Ä\n                  {getSortIcon(\"name\")}\n                </div>\n              </th>\n              <th\n                onClick={() => handleSort(\"warehouse_name\")}\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 whitespace-nowrap\"\n              >\n                <div className=\"flex items-center\">\n                  –°–∫–ª–∞–¥\n                  {getSortIcon(\"warehouse_name\")}\n                </div>\n              </th>\n              <th\n                onClick={() => handleSort(\"available\")}\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 whitespace-nowrap\"\n              >\n                <div className=\"flex items-center justify-end\">\n                  –î–æ—Å—Ç—É–ø–Ω–æ\n                  {getSortIcon(\"available\")}\n                </div>\n              </th>\n              <th\n                onClick={() => handleSort(\"daily_sales_avg\")}\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 whitespace-nowrap\"\n              >\n                <div className=\"flex items-center justify-end\">\n                  –ü—Ä–æ–¥–∞–∂–∏/–¥–µ–Ω—å\n                  {getSortIcon(\"daily_sales_avg\")}\n                </div>\n              </th>\n              <th\n                onClick={() => handleSort(\"days_of_stock\")}\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 whitespace-nowrap\"\n              >\n                <div className=\"flex items-center justify-end\">\n                  –î–Ω–µ–π –∑–∞–ø–∞—Å–∞\n                  {getSortIcon(\"days_of_stock\")}\n                </div>\n              </th>\n              <th\n                onClick={() => handleSort(\"replenishment_need\")}\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100 whitespace-nowrap\"\n              >\n                <div className=\"flex items-center justify-end\">\n                  –ù—É–∂–Ω–æ –∑–∞–∫–∞–∑–∞—Ç—å\n                  {getSortIcon(\"replenishment_need\")}\n                </div>\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap\">\n                –°—Ç–∞—Ç—É—Å\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {shouldVirtualize ? (\n              <>\n                {/* Spacer for virtual scrolling */}\n                <tr style={{ height: `${virtualizer.getTotalSize()}px` }}>\n                  <td colSpan={7} style={{ padding: 0 }} />\n                </tr>\n                {/* Virtualized rows */}\n                {virtualizer.getVirtualItems().map((virtualRow) => {\n                  const row = rows[virtualRow.index];\n                  return (\n                    <React.Fragment key={virtualRow.key}>\n                      <tr\n                        style={{\n                          position: \"absolute\",\n                          top: 0,\n                          left: 0,\n                          width: \"100%\",\n                          transform: `translateY(${virtualRow.start}px)`,\n                        }}\n                      >\n                        <td colSpan={7} style={{ padding: 0 }}>\n                          <table className=\"min-w-full\">\n                            <tbody>{renderRow(row)}</tbody>\n                          </table>\n                        </td>\n                      </tr>\n                    </React.Fragment>\n                  );\n                })}\n              </>\n            ) : (\n              // Non-virtualized rendering for small datasets\n              <>\n                {data.map((warehouse) => (\n                  <React.Fragment key={warehouse.warehouse_name}>\n                    {renderRow({ type: \"warehouse-header\", warehouse })}\n                    {warehouse.items.map((item) =>\n                      renderRow({ type: \"item\", item, warehouse })\n                    )}\n                    {renderRow({ type: \"warehouse-footer\", warehouse })}\n                  </React.Fragment>\n                ))}\n              </>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { DashboardSummary } from \"../../types/warehouse\";\nimport { Button } from \"../ui/Button\";\n\nexport interface DashboardHeaderProps {\n  summary?: DashboardSummary;\n  lastUpdated?: string;\n  onRefresh: () => void;\n  onExport: () => void;\n  isRefreshing?: boolean;\n}\n\nexport const DashboardHeader: React.FC<DashboardHeaderProps> = ({\n  summary,\n  lastUpdated,\n  onRefresh,\n  onExport,\n  isRefreshing = false,\n}) => {\n  const formatLastUpdated = (dateString?: string): string => {\n    if (!dateString) return \"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ\";\n\n    try {\n      const date = new Date(dateString);\n      return new Intl.DateTimeFormat(\"ru-RU\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      }).format(date);\n    } catch {\n      return \"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ\";\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            –î–∞—à–±–æ—Ä–¥ —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤\n          </h1>\n          <p className=\"text-sm text-gray-600\">\n            –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: {formatLastUpdated(lastUpdated)}\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-3 mt-4 lg:mt-0\">\n          <Button\n            variant=\"secondary\"\n            onClick={onRefresh}\n            isLoading={isRefreshing}\n            disabled={isRefreshing}\n          >\n            <svg\n              className=\"w-4 h-4 mr-2\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n              />\n            </svg>\n            –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ\n          </Button>\n\n          <Button variant=\"primary\" onClick={onExport}>\n            <svg\n              className=\"w-4 h-4 mr-2\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n              />\n            </svg>\n            –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV\n          </Button>\n        </div>\n      </div>\n\n      {summary && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {/* Total products */}\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium text-gray-500\">\n                –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤\n              </span>\n              <span className=\"mt-2 text-3xl font-bold text-gray-900\">\n                {summary.total_products.toLocaleString(\"ru-RU\")}\n              </span>\n            </div>\n          </div>\n\n          {/* Active products */}\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium text-gray-500\">\n                –ê–∫—Ç–∏–≤–Ω—ã—Ö\n              </span>\n              <span className=\"mt-2 text-3xl font-bold text-blue-600\">\n                {summary.active_products.toLocaleString(\"ru-RU\")}\n              </span>\n            </div>\n          </div>\n\n          {/* Critical status */}\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium text-gray-500\">–î–µ—Ñ–∏—Ü–∏—Ç</span>\n              <span className=\"mt-2 text-3xl font-bold text-red-600\">\n                {summary.by_liquidity.critical.toLocaleString(\"ru-RU\")}\n              </span>\n            </div>\n          </div>\n\n          {/* Low status */}\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium text-gray-500\">\n                –ù–∏–∑–∫–∏–π –∑–∞–ø–∞—Å\n              </span>\n              <span className=\"mt-2 text-3xl font-bold text-yellow-600\">\n                {summary.by_liquidity.low.toLocaleString(\"ru-RU\")}\n              </span>\n            </div>\n          </div>\n\n          {/* Normal status */}\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium text-gray-500\">–ù–æ—Ä–º–∞</span>\n              <span className=\"mt-2 text-3xl font-bold text-green-600\">\n                {summary.by_liquidity.normal.toLocaleString(\"ru-RU\")}\n              </span>\n            </div>\n          </div>\n\n          {/* Excess status */}\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium text-gray-500\">–ò–∑–±—ã—Ç–æ–∫</span>\n              <span className=\"mt-2 text-3xl font-bold text-blue-600\">\n                {summary.by_liquidity.excess.toLocaleString(\"ru-RU\")}\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {summary && summary.total_replenishment_need > 0 && (\n        <div className=\"mt-4 p-4 bg-orange-50 border border-orange-200 rounded-lg\">\n          <div className=\"flex items-center\">\n            <svg\n              className=\"w-5 h-5 text-orange-600 mr-2\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 20 20\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n            <span className=\"text-sm font-medium text-orange-900\">\n              –û–±—â–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏:{\" \"}\n              <span className=\"font-bold\">\n                {summary.total_replenishment_need.toLocaleString(\"ru-RU\")} —à—Ç.\n              </span>\n            </span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { PaginationInfo } from \"../../types/warehouse\";\n\nexport interface PaginationProps {\n  pagination: PaginationInfo;\n  onPageChange: (page: number) => void;\n}\n\n/**\n * Pagination component for warehouse dashboard\n *\n * Displays page navigation controls with:\n * - Previous/Next buttons\n * - Page numbers\n * - Total count information\n *\n * Requirements: 12\n */\nexport const Pagination: React.FC<PaginationProps> = ({\n  pagination,\n  onPageChange,\n}) => {\n  const {\n    current_page,\n    total_pages,\n    has_prev,\n    has_next,\n    total,\n    limit,\n    offset,\n  } = pagination;\n\n  // Calculate displayed items range\n  const startItem = offset + 1;\n  const endItem = Math.min(offset + limit, total);\n\n  // Generate page numbers to display\n  const getPageNumbers = () => {\n    const pages: (number | string)[] = [];\n    const maxPagesToShow = 7;\n\n    if (total_pages <= maxPagesToShow) {\n      // Show all pages if total is small\n      for (let i = 1; i <= total_pages; i++) {\n        pages.push(i);\n      }\n    } else {\n      // Show first page\n      pages.push(1);\n\n      if (current_page > 3) {\n        pages.push(\"...\");\n      }\n\n      // Show pages around current page\n      const start = Math.max(2, current_page - 1);\n      const end = Math.min(total_pages - 1, current_page + 1);\n\n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n\n      if (current_page < total_pages - 2) {\n        pages.push(\"...\");\n      }\n\n      // Show last page\n      pages.push(total_pages);\n    }\n\n    return pages;\n  };\n\n  if (total === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow p-4\">\n      <div className=\"flex items-center justify-between\">\n        {/* Mobile view */}\n        <div className=\"flex-1 flex justify-between sm:hidden\">\n          <button\n            onClick={() => onPageChange(current_page - 1)}\n            disabled={!has_prev}\n            className={`px-4 py-2 border border-gray-300 rounded-md text-sm font-medium ${\n              has_prev\n                ? \"text-gray-700 bg-white hover:bg-gray-50\"\n                : \"text-gray-400 bg-gray-100 cursor-not-allowed opacity-50\"\n            }`}\n          >\n            –ù–∞–∑–∞–¥\n          </button>\n          <button\n            onClick={() => onPageChange(current_page + 1)}\n            disabled={!has_next}\n            className={`px-4 py-2 border border-gray-300 rounded-md text-sm font-medium ${\n              has_next\n                ? \"text-gray-700 bg-white hover:bg-gray-50\"\n                : \"text-gray-400 bg-gray-100 cursor-not-allowed opacity-50\"\n            }`}\n          >\n            –í–ø–µ—Ä–µ–¥\n          </button>\n        </div>\n\n        {/* Desktop view */}\n        <div className=\"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between\">\n          <div>\n            <p className=\"text-sm text-gray-700\">\n              –ü–æ–∫–∞–∑–∞–Ω–æ <span className=\"font-medium\">{startItem}</span>\n              {\" - \"}\n              <span className=\"font-medium\">{endItem}</span>\n              {\" –∏–∑ \"}\n              <span className=\"font-medium\">{total}</span>\n              {\" —Ç–æ–≤–∞—Ä–æ–≤\"}\n            </p>\n          </div>\n          <div>\n            <nav\n              className=\"relative z-0 inline-flex rounded-md shadow-sm space-x-2\"\n              aria-label=\"Pagination\"\n            >\n              {/* Previous button */}\n              <button\n                onClick={() => onPageChange(current_page - 1)}\n                disabled={!has_prev}\n                className={`px-4 py-2 border border-gray-300 rounded-md text-sm font-medium ${\n                  has_prev\n                    ? \"text-gray-700 bg-white hover:bg-gray-50\"\n                    : \"text-gray-400 bg-gray-100 cursor-not-allowed opacity-50\"\n                }`}\n              >\n                <span className=\"sr-only\">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</span>\n                <svg\n                  className=\"h-5 w-5\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                  aria-hidden=\"true\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\n                    clipRule=\"evenodd\"\n                  />\n                </svg>\n              </button>\n\n              {/* Page numbers */}\n              {getPageNumbers().map((page, index) => {\n                if (page === \"...\") {\n                  return (\n                    <span\n                      key={`ellipsis-${index}`}\n                      className=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md bg-white text-sm font-medium text-gray-700\"\n                    >\n                      ...\n                    </span>\n                  );\n                }\n\n                const pageNum = page as number;\n                const isCurrentPage = pageNum === current_page;\n\n                return (\n                  <button\n                    key={pageNum}\n                    onClick={() => onPageChange(pageNum)}\n                    className={`px-4 py-2 border rounded-md text-sm font-medium ${\n                      isCurrentPage\n                        ? \"bg-primary-50 border-primary-500 text-primary-600\"\n                        : \"bg-white border-gray-300 text-gray-700 hover:bg-gray-50\"\n                    }`}\n                  >\n                    {pageNum}\n                  </button>\n                );\n              })}\n\n              {/* Next button */}\n              <button\n                onClick={() => onPageChange(current_page + 1)}\n                disabled={!has_next}\n                className={`px-4 py-2 border border-gray-300 rounded-md text-sm font-medium ${\n                  has_next\n                    ? \"text-gray-700 bg-white hover:bg-gray-50\"\n                    : \"text-gray-400 bg-gray-100 cursor-not-allowed opacity-50\"\n                }`}\n              >\n                <span className=\"sr-only\">–°–ª–µ–¥—É—é—â–∞—è</span>\n                <svg\n                  className=\"h-5 w-5\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                  aria-hidden=\"true\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n                    clipRule=\"evenodd\"\n                  />\n                </svg>\n              </button>\n            </nav>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import type { ApiError } from \"@/types\";\n\n// API configuration\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || \"/api\";\nconst API_TIMEOUT = 30000; // 30 seconds\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000; // 1 second\n\n// Custom error class for API errors\nexport class ApiException extends Error {\n  constructor(\n    message: string,\n    public statusCode?: number,\n    public response?: unknown,\n    public isRetryable: boolean = false\n  ) {\n    super(message);\n    this.name = \"ApiException\";\n  }\n}\n\n// Helper function to determine if error is retryable\nfunction isRetryableError(error: unknown): boolean {\n  if (error instanceof ApiException) {\n    // Retry on 5xx errors and network errors\n    if (!error.statusCode) return true; // Network error\n    return error.statusCode >= 500 && error.statusCode < 600;\n  }\n  return true; // Unknown errors are retryable\n}\n\n// Helper function to delay execution\nfunction delay(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// Request options interface\ninterface RequestOptions extends RequestInit {\n  timeout?: number;\n  params?: Record<string, string | number | boolean>;\n}\n\n// Helper function to build URL with query parameters\nfunction buildUrl(\n  endpoint: string,\n  params?: Record<string, string | number | boolean>\n): string {\n  const url = new URL(`${API_BASE_URL}${endpoint}`, window.location.origin);\n\n  if (params) {\n    Object.entries(params).forEach(([key, value]) => {\n      url.searchParams.append(key, String(value));\n    });\n  }\n\n  return url.toString();\n}\n\n// Helper function to handle fetch with timeout\nasync function fetchWithTimeout(\n  url: string,\n  options: RequestOptions = {}\n): Promise<Response> {\n  const { timeout = API_TIMEOUT, ...fetchOptions } = options;\n\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const response = await fetch(url, {\n      ...fetchOptions,\n      signal: controller.signal,\n    });\n    clearTimeout(timeoutId);\n    return response;\n  } catch (error) {\n    clearTimeout(timeoutId);\n    if (error instanceof Error && error.name === \"AbortError\") {\n      throw new ApiException(\"Request timeout\", 408);\n    }\n    throw error;\n  }\n}\n\n// Generic request function with retry logic\nasync function request<T>(\n  endpoint: string,\n  options: RequestOptions = {},\n  retryCount = 0\n): Promise<T> {\n  const { params, ...fetchOptions } = options;\n\n  const url = buildUrl(endpoint, params);\n\n  const defaultHeaders: HeadersInit = {\n    \"Content-Type\": \"application/json\",\n  };\n\n  try {\n    const response = await fetchWithTimeout(url, {\n      ...fetchOptions,\n      headers: {\n        ...defaultHeaders,\n        ...fetchOptions.headers,\n      },\n    });\n\n    // Handle non-OK responses\n    if (!response.ok) {\n      let errorData: ApiError;\n      try {\n        errorData = await response.json();\n      } catch {\n        errorData = {\n          error: response.statusText || \"Unknown error\",\n          code: response.status,\n        };\n      }\n\n      const isRetryable = response.status >= 500 && response.status < 600;\n      throw new ApiException(\n        errorData.message || errorData.error || \"Request failed\",\n        response.status,\n        errorData,\n        isRetryable\n      );\n    }\n\n    // Parse JSON response\n    const data = await response.json();\n    return data as T;\n  } catch (error) {\n    // Retry logic for retryable errors\n    if (retryCount < MAX_RETRIES && isRetryableError(error)) {\n      const delayMs = RETRY_DELAY * Math.pow(2, retryCount); // Exponential backoff\n      console.warn(\n        `Request failed, retrying in ${delayMs}ms (attempt ${\n          retryCount + 1\n        }/${MAX_RETRIES})`,\n        error\n      );\n      await delay(delayMs);\n      return request<T>(endpoint, options, retryCount + 1);\n    }\n\n    // Throw the error if not retryable or max retries reached\n    if (error instanceof ApiException) {\n      throw error;\n    }\n\n    if (error instanceof Error) {\n      throw new ApiException(error.message, undefined, undefined, false);\n    }\n\n    throw new ApiException(\n      \"Unknown error occurred\",\n      undefined,\n      undefined,\n      false\n    );\n  }\n}\n\n// API service object with HTTP methods\nexport const api = {\n  get: <T>(endpoint: string, options?: RequestOptions) =>\n    request<T>(endpoint, { ...options, method: \"GET\" }),\n\n  post: <T>(endpoint: string, data?: unknown, options?: RequestOptions) =>\n    request<T>(endpoint, {\n      ...options,\n      method: \"POST\",\n      body: JSON.stringify(data),\n    }),\n\n  put: <T>(endpoint: string, data?: unknown, options?: RequestOptions) =>\n    request<T>(endpoint, {\n      ...options,\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    }),\n\n  delete: <T>(endpoint: string, options?: RequestOptions) =>\n    request<T>(endpoint, { ...options, method: \"DELETE\" }),\n\n  patch: <T>(endpoint: string, data?: unknown, options?: RequestOptions) =>\n    request<T>(endpoint, {\n      ...options,\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    }),\n};\n\n// Export helper functions for testing\nexport { buildUrl, fetchWithTimeout };\n","import { api } from \"./api\";\nimport type {\n  WarehouseDashboardData,\n  WarehouseApiResponse,\n  WarehouseDashboardParams,\n  ExportParams,\n  WarehouseListItem,\n  ClusterListItem,\n} from \"@/types\";\n\n// Warehouse service endpoints\nconst ENDPOINTS = {\n  DASHBOARD: \"/warehouse-dashboard.php\",\n  EXPORT: \"/warehouse-dashboard.php\",\n  WAREHOUSES: \"/warehouse-dashboard.php\",\n  CLUSTERS: \"/warehouse-dashboard.php\",\n} as const;\n\n// Warehouse service interface\nexport const warehouseService = {\n  /**\n   * Get warehouse dashboard data with filters and sorting\n   */\n  async getDashboardData(\n    params: WarehouseDashboardParams = {}\n  ): Promise<WarehouseDashboardData> {\n    const queryParams: Record<string, string | number | boolean> = {\n      action: \"dashboard\",\n    };\n\n    // Add optional parameters\n    if (params.warehouse) queryParams.warehouse = params.warehouse;\n    if (params.cluster) queryParams.cluster = params.cluster;\n    if (params.liquidity_status)\n      queryParams.liquidity_status = params.liquidity_status;\n    if (params.active_only !== undefined)\n      queryParams.active_only = params.active_only;\n    if (params.has_replenishment_need !== undefined)\n      queryParams.has_replenishment_need = params.has_replenishment_need;\n    if (params.sort_by) queryParams.sort_by = params.sort_by;\n    if (params.sort_order) queryParams.sort_order = params.sort_order;\n    if (params.limit) queryParams.limit = params.limit;\n    if (params.offset) queryParams.offset = params.offset;\n\n    const response = await api.get<\n      WarehouseApiResponse<WarehouseDashboardData>\n    >(ENDPOINTS.DASHBOARD, {\n      params: queryParams,\n    });\n\n    if (!response.success) {\n      throw new Error(response.error || \"Failed to fetch dashboard data\");\n    }\n\n    return response.data;\n  },\n\n  /**\n   * Export warehouse data to CSV\n   */\n  async exportToCSV(params: ExportParams = {}): Promise<Blob> {\n    const queryParams: Record<string, string | number | boolean> = {\n      action: \"export\",\n    };\n\n    // Add optional parameters\n    if (params.warehouse) queryParams.warehouse = params.warehouse;\n    if (params.cluster) queryParams.cluster = params.cluster;\n    if (params.liquidity_status)\n      queryParams.liquidity_status = params.liquidity_status;\n    if (params.active_only !== undefined)\n      queryParams.active_only = params.active_only;\n    if (params.has_replenishment_need !== undefined)\n      queryParams.has_replenishment_need = params.has_replenishment_need;\n\n    // Build URL with query parameters\n    const url = new URL(\n      `${import.meta.env.VITE_API_BASE_URL || \"/api\"}${ENDPOINTS.EXPORT}`,\n      window.location.origin\n    );\n\n    Object.entries(queryParams).forEach(([key, value]) => {\n      url.searchParams.append(key, String(value));\n    });\n\n    // Fetch CSV file\n    const response = await fetch(url.toString());\n\n    if (!response.ok) {\n      throw new Error(\"Failed to export data\");\n    }\n\n    return response.blob();\n  },\n\n  /**\n   * Download CSV file\n   */\n  downloadCSV(blob: Blob, filename?: string): void {\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download =\n      filename ||\n      `warehouse_dashboard_${new Date().toISOString().split(\"T\")[0]}.csv`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(url);\n  },\n\n  /**\n   * Get list of all warehouses\n   */\n  async getWarehouses(): Promise<WarehouseListItem[]> {\n    const response = await api.get<WarehouseApiResponse<WarehouseListItem[]>>(\n      ENDPOINTS.WAREHOUSES,\n      {\n        params: {\n          action: \"warehouses\",\n        },\n      }\n    );\n\n    if (!response.success) {\n      throw new Error(response.error || \"Failed to fetch warehouses\");\n    }\n\n    return response.data;\n  },\n\n  /**\n   * Get list of all clusters\n   */\n  async getClusters(): Promise<ClusterListItem[]> {\n    const response = await api.get<WarehouseApiResponse<ClusterListItem[]>>(\n      ENDPOINTS.CLUSTERS,\n      {\n        params: {\n          action: \"clusters\",\n        },\n      }\n    );\n\n    if (!response.success) {\n      throw new Error(response.error || \"Failed to fetch clusters\");\n    }\n\n    return response.data;\n  },\n};\n\n// Export types\nexport type WarehouseService = typeof warehouseService;\n","import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport type { UseQueryResult, UseMutationResult } from \"@tanstack/react-query\";\nimport { warehouseService } from \"@/services\";\nimport type {\n  WarehouseDashboardData,\n  WarehouseDashboardParams,\n  ExportParams,\n  WarehouseListItem,\n  ClusterListItem,\n} from \"@/types\";\n\n// Query keys for caching\nexport const warehouseKeys = {\n  all: [\"warehouse\"] as const,\n  dashboard: (params?: WarehouseDashboardParams) =>\n    [...warehouseKeys.all, \"dashboard\", params] as const,\n  warehouses: () => [...warehouseKeys.all, \"warehouses\"] as const,\n  clusters: () => [...warehouseKeys.all, \"clusters\"] as const,\n};\n\n// Hook options for warehouse dashboard\nexport interface UseWarehouseDashboardOptions extends WarehouseDashboardParams {\n  enabled?: boolean;\n  refetchInterval?: number;\n}\n\n/**\n * Hook to fetch warehouse dashboard data with filters and sorting\n */\nexport function useWarehouseDashboard(\n  options: UseWarehouseDashboardOptions = {}\n): UseQueryResult<WarehouseDashboardData, Error> {\n  const { enabled = true, refetchInterval, ...params } = options;\n\n  return useQuery({\n    queryKey: warehouseKeys.dashboard(params),\n    queryFn: () => warehouseService.getDashboardData(params),\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    gcTime: 10 * 60 * 1000, // 10 minutes (formerly cacheTime)\n    enabled,\n    refetchInterval,\n    retry: (failureCount, error) => {\n      // Don't retry on 4xx errors (client errors)\n      if (error instanceof Error && \"statusCode\" in error) {\n        const statusCode = (error as { statusCode?: number }).statusCode;\n        if (statusCode && statusCode >= 400 && statusCode < 500) {\n          return false;\n        }\n      }\n      // Retry on 5xx errors and network errors up to 3 times\n      return failureCount < 3;\n    },\n    retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000), // Exponential backoff\n  });\n}\n\n/**\n * Hook to fetch list of warehouses\n */\nexport function useWarehouses(\n  options: {\n    enabled?: boolean;\n  } = {}\n): UseQueryResult<WarehouseListItem[], Error> {\n  const { enabled = true } = options;\n\n  return useQuery({\n    queryKey: warehouseKeys.warehouses(),\n    queryFn: () => warehouseService.getWarehouses(),\n    staleTime: 30 * 60 * 1000, // 30 minutes (warehouses don't change often)\n    gcTime: 60 * 60 * 1000, // 1 hour\n    enabled,\n    retry: 2,\n  });\n}\n\n/**\n * Hook to fetch list of clusters\n */\nexport function useClusters(\n  options: {\n    enabled?: boolean;\n  } = {}\n): UseQueryResult<ClusterListItem[], Error> {\n  const { enabled = true } = options;\n\n  return useQuery({\n    queryKey: warehouseKeys.clusters(),\n    queryFn: () => warehouseService.getClusters(),\n    staleTime: 30 * 60 * 1000, // 30 minutes (clusters don't change often)\n    gcTime: 60 * 60 * 1000, // 1 hour\n    enabled,\n    retry: 2,\n  });\n}\n\n/**\n * Hook to export warehouse data to CSV\n */\nexport function useWarehouseExport(): UseMutationResult<\n  Blob,\n  Error,\n  ExportParams,\n  unknown\n> {\n  return useMutation({\n    mutationFn: (params: ExportParams) => warehouseService.exportToCSV(params),\n    onSuccess: (blob) => {\n      // Automatically download the CSV file\n      warehouseService.downloadCSV(blob);\n    },\n    onError: (error) => {\n      console.error(\"Failed to export warehouse data:\", error);\n    },\n  });\n}\n\n/**\n * Combined hook for warehouse dashboard with all related data\n */\nexport interface UseWarehouseDashboardFullOptions\n  extends UseWarehouseDashboardOptions {\n  loadWarehouses?: boolean;\n  loadClusters?: boolean;\n}\n\nexport interface UseWarehouseDashboardFullResult {\n  dashboard: UseQueryResult<WarehouseDashboardData, Error>;\n  warehouses: UseQueryResult<WarehouseListItem[], Error>;\n  clusters: UseQueryResult<ClusterListItem[], Error>;\n  exportMutation: UseMutationResult<Blob, Error, ExportParams, unknown>;\n  isLoading: boolean;\n  hasError: boolean;\n}\n\n/**\n * Convenience hook that combines dashboard data, warehouses, and clusters\n */\nexport function useWarehouseDashboardFull(\n  options: UseWarehouseDashboardFullOptions = {}\n): UseWarehouseDashboardFullResult {\n  const {\n    loadWarehouses = true,\n    loadClusters = true,\n    ...dashboardOptions\n  } = options;\n\n  const dashboard = useWarehouseDashboard(dashboardOptions);\n  const warehouses = useWarehouses({ enabled: loadWarehouses });\n  const clusters = useClusters({ enabled: loadClusters });\n  const exportMutation = useWarehouseExport();\n\n  return {\n    dashboard,\n    warehouses,\n    clusters,\n    exportMutation,\n    isLoading:\n      dashboard.isLoading || warehouses.isLoading || clusters.isLoading,\n    hasError: dashboard.isError || warehouses.isError || clusters.isError,\n  };\n}\n","import React, { useState, useMemo, useCallback, useEffect } from \"react\";\nimport { LoadingSpinner } from \"../components/ui/LoadingSpinner\";\nimport { ErrorMessage } from \"../components/ui/ErrorMessage\";\nimport {\n  DashboardHeader,\n  WarehouseFilters,\n  WarehouseTable,\n  Pagination,\n} from \"../components/warehouse\";\nimport { useWarehouseDashboardFull } from \"../hooks/useWarehouse\";\nimport type { FilterState, SortConfig } from \"../types/warehouse\";\n\n/**\n * WarehouseDashboardPage - Main page for warehouse inventory management\n *\n * Features:\n * - Dashboard summary with key metrics\n * - Filtering by warehouse, cluster, liquidity status\n * - Sorting by various fields\n * - Pagination for large datasets\n * - Export to CSV\n * - Auto-refresh capability\n */\nexport const WarehouseDashboardPage: React.FC = () => {\n  // DIAGNOSTIC: Log component mount\n  useEffect(() => {\n    console.log(\"[DIAGNOSTIC] WarehouseDashboardPage component mounted\", {\n      timestamp: new Date().toISOString(),\n    });\n  }, []);\n\n  // State management for filters and sorting\n  const [filters, setFilters] = useState<FilterState>({\n    active_only: true,\n  });\n\n  const [sortConfig, setSortConfig] = useState<SortConfig>({\n    field: \"replenishment_need\",\n    order: \"desc\",\n  });\n\n  // State for pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 100;\n\n  // Memoize query parameters\n  const queryParams = useMemo(\n    () => ({\n      ...filters,\n      sort_by: sortConfig.field,\n      sort_order: sortConfig.order,\n      limit: itemsPerPage,\n      offset: (currentPage - 1) * itemsPerPage,\n      refetchInterval: 5 * 60 * 1000, // Auto-refresh every 5 minutes\n    }),\n    [filters, sortConfig, currentPage, itemsPerPage]\n  );\n\n  // Fetch dashboard data with all related information\n  const {\n    dashboard,\n    warehouses,\n    clusters,\n    exportMutation,\n    isLoading,\n    hasError,\n  } = useWarehouseDashboardFull(queryParams);\n\n  // Memoize export parameters\n  const exportParams = useMemo(\n    () => ({\n      warehouse: filters.warehouse,\n      cluster: filters.cluster,\n      liquidity_status: filters.liquidity_status,\n      active_only: filters.active_only,\n      has_replenishment_need: filters.has_replenishment_need,\n    }),\n    [filters]\n  );\n\n  // Handle refresh action (memoized)\n  const handleRefresh = useCallback(() => {\n    dashboard.refetch();\n  }, [dashboard]);\n\n  // Handle export action (memoized)\n  const handleExport = useCallback(() => {\n    exportMutation.mutate(exportParams);\n  }, [exportMutation, exportParams]);\n\n  // Handle filter changes (memoized)\n  const handleFilterChange = useCallback((newFilters: FilterState) => {\n    setFilters(newFilters);\n    setCurrentPage(1); // Reset to first page when filters change\n  }, []);\n\n  // Handle sort changes (memoized)\n  const handleSortChange = useCallback((newSortConfig: SortConfig) => {\n    setSortConfig(newSortConfig);\n    setCurrentPage(1); // Reset to first page when sort changes\n  }, []);\n\n  // Handle page changes (memoized)\n  const handlePageChange = useCallback((page: number) => {\n    setCurrentPage(page);\n    // Scroll to top of table\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, []);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <LoadingSpinner size=\"xl\" text=\"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞...\" />\n      </div>\n    );\n  }\n\n  // Error state\n  if (hasError) {\n    const error = dashboard.error || warehouses.error || clusters.error;\n    return (\n      <ErrorMessage\n        error={error || \"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ\"}\n        title=\"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞\"\n        onRetry={handleRefresh}\n        showDetails={true}\n      />\n    );\n  }\n\n  // Empty state\n  if (!dashboard.data || dashboard.data.warehouses.length === 0) {\n    return (\n      <div>\n        <DashboardHeader\n          summary={dashboard.data?.summary}\n          lastUpdated={dashboard.data?.last_updated}\n          onRefresh={handleRefresh}\n          onExport={handleExport}\n          isRefreshing={dashboard.isFetching}\n        />\n        <WarehouseFilters\n          filters={filters}\n          onChange={handleFilterChange}\n          warehouses={warehouses.data}\n          clusters={clusters.data}\n        />\n        <div className=\"bg-white rounded-lg shadow-md p-8 text-center\">\n          <svg\n            className=\"mx-auto h-12 w-12 text-gray-400\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4\"\n            />\n          </svg>\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">\n            –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n          </h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Main content\n  return (\n    <div className=\"space-y-6\">\n      <DashboardHeader\n        summary={dashboard.data.summary}\n        lastUpdated={dashboard.data.last_updated}\n        onRefresh={handleRefresh}\n        onExport={handleExport}\n        isRefreshing={dashboard.isFetching}\n      />\n\n      <WarehouseFilters\n        filters={filters}\n        onChange={handleFilterChange}\n        warehouses={warehouses.data}\n        clusters={clusters.data}\n      />\n\n      <WarehouseTable\n        data={dashboard.data.warehouses}\n        sortConfig={sortConfig}\n        onSort={handleSortChange}\n      />\n\n      {/* Pagination */}\n      {dashboard.data.pagination && (\n        <Pagination\n          pagination={dashboard.data.pagination}\n          onPageChange={handlePageChange}\n        />\n      )}\n\n      {/* Export status notification */}\n      {exportMutation.isPending && (\n        <div className=\"fixed bottom-4 right-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg\">\n          <div className=\"flex items-center\">\n            <LoadingSpinner size=\"sm\" />\n            <span className=\"ml-3\">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö...</span>\n          </div>\n        </div>\n      )}\n\n      {exportMutation.isSuccess && (\n        <div className=\"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg\">\n          <div className=\"flex items-center\">\n            <svg\n              className=\"w-5 h-5 mr-2\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 20 20\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n            <span>–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã</span>\n          </div>\n        </div>\n      )}\n\n      {exportMutation.isError && (\n        <div className=\"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg\">\n          <div className=\"flex items-center\">\n            <svg\n              className=\"w-5 h-5 mr-2\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 20 20\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n            <span>–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WarehouseDashboardPage;\n"],"names":["LiquidityBadge","React","status","daysOfStock","colors","labels","formattedDays","useMemo","jsxs","ReplenishmentIndicator","need","targetStock","isUrgent","jsx","formattedNeed","MetricsTooltip","item","children","isVisible","setIsVisible","useState","visibleMetrics","m","metric","index","WarehouseFilters","filters","onChange","warehouses","clusters","liquidityOptions","handleWarehouseChange","value","handleClusterChange","handleLiquidityStatusChange","handleActiveOnlyChange","checked","handleReplenishmentNeedChange","e","warehouse","cluster","option","WarehouseTable","data","sortConfig","onSort","parentRef","useRef","rows","flatRows","shouldVirtualize","sum","virtualizer","useVirtualizer","row","handleSort","field","newOrder","getSortIcon","renderRow","Fragment","virtualRow","DashboardHeader","summary","lastUpdated","onRefresh","onExport","isRefreshing","formatLastUpdated","dateString","date","Button","Pagination","pagination","onPageChange","current_page","total_pages","has_prev","has_next","total","limit","offset","startItem","endItem","getPageNumbers","pages","i","start","end","page","pageNum","isCurrentPage","API_BASE_URL","API_TIMEOUT","MAX_RETRIES","RETRY_DELAY","ApiException","message","statusCode","response","isRetryable","isRetryableError","error","delay","ms","resolve","buildUrl","endpoint","params","url","key","fetchWithTimeout","options","timeout","fetchOptions","controller","timeoutId","request","retryCount","defaultHeaders","errorData","delayMs","api","ENDPOINTS","warehouseService","queryParams","blob","filename","link","warehouseKeys","useWarehouseDashboard","enabled","refetchInterval","useQuery","failureCount","attemptIndex","useWarehouses","useClusters","useWarehouseExport","useMutation","useWarehouseDashboardFull","loadWarehouses","loadClusters","dashboardOptions","dashboard","exportMutation","WarehouseDashboardPage","useEffect","setFilters","setSortConfig","currentPage","setCurrentPage","itemsPerPage","isLoading","hasError","exportParams","handleRefresh","useCallback","handleExport","handleFilterChange","newFilters","handleSortChange","newSortConfig","handlePageChange","LoadingSpinner","ErrorMessage","_a","_b"],"mappings":"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"}