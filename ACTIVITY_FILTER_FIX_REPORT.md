# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ Activity Filter

## –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–ë—ã–ª–æ:** 271 –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–≤–∞—Ä  
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** ~49 —Ç–æ–≤–∞—Ä–æ–≤ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ > 0  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ `getActiveProductsFilter()`

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: –í—Å–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ "–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–∫–ª–∞–¥"

**–ë—ã–ª–æ:** –í—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–º–µ–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞  
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –†–µ–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–∫–ª–∞–¥–æ–≤ (–¢–≤–µ—Ä—å, –•–æ—Ä—É–≥–≤–∏–Ω–æ, –°–ü–±-–®—É—à–∞—Ä—ã –∏ —Ç.–¥.)  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `inventory`

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: –ö–Ω–æ–ø–∫–∏ "–°–∫–ª–∞–¥—ã" –∏ "–ö–ª–∞—Å—Ç–µ—Ä—ã" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏

**–ë—ã–ª–æ:** –ö–Ω–æ–ø–∫–∏ –Ω–µ –∏–º–µ–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏  
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º –∏ –∫–ª–∞—Å—Ç–µ—Ä–∞–º  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ API

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

**–ë—ã–ª–æ:** API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `v_dashboard_inventory` –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –±–∞–∑–µ  
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –†–∞–±–æ—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π `inventory`  
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä–∞–±–æ—Ç—É —Å —Ç–∞–±–ª–∏—Ü–µ–π `inventory`

## ‚úÖ –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `api/inventory-analytics.php`:

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getActiveProductsFilter()`:

```php
// –ë–´–õ–û:
return " AND v.current_stock > 0 ";

// –°–¢–ê–õ–û:
return " AND COALESCE(i.current_stock, i.stock, 0) > 0 ";
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getActivityStatistics()`:

```php
// –ë–´–õ–û:
FROM v_dashboard_inventory v

// –°–¢–ê–õ–û:
FROM inventory i
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö:

```php
// –ë–´–õ–û:
FROM v_dashboard_inventory v

// –°–¢–ê–õ–û:
FROM inventory i
WITH COALESCE –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–ª–µ–π
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è:

-   `activity_status` - —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞
-   –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π —Å–∫–ª–∞–¥–æ–≤
-   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ —Å–∫–ª–∞–¥–æ–≤

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### –§–∏–ª—å—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

-   ‚úÖ **–í—Å–µ —Ç–æ–≤–∞—Ä—ã:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
-   ‚úÖ **–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:** –¢–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å stock > 0
-   ‚úÖ **–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:** –¢–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å stock = 0

### –§–∏–ª—å—Ç—Ä—ã —Å–∫–ª–∞–¥–æ–≤:

-   ‚úÖ **–¢–≤–µ—Ä—å:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Ç–æ–ª—å–∫–æ —Å —ç—Ç–æ–≥–æ —Å–∫–ª–∞–¥–∞
-   ‚úÖ **–•–æ—Ä—É–≥–≤–∏–Ω–æ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Ç–æ–ª—å–∫–æ —Å —ç—Ç–æ–≥–æ —Å–∫–ª–∞–¥–∞
-   ‚úÖ **–°–ü–±-–®—É—à–∞—Ä—ã:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Ç–æ–ª—å–∫–æ —Å —ç—Ç–æ–≥–æ —Å–∫–ª–∞–¥–∞

### –§–∏–ª—å—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–æ–≤:

-   ‚úÖ **–¶–µ–Ω—Ç—Ä:** –¢–≤–µ—Ä—å + –•–æ—Ä—É–≥–≤–∏–Ω–æ
-   ‚úÖ **–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥:** –°–ü–±-–®—É—à–∞—Ä—ã
-   ‚úÖ **–£—Ä–∞–ª:** –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥
-   ‚úÖ **–°–∏–±–∏—Ä—å:** –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π API —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞:
**https://www.market-mi.ru/warehouse-dashboard/**

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

-   `activity_filter=all|active|inactive` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
-   `warehouse=–Ω–∞–∑–≤–∞–Ω–∏–µ_—Å–∫–ª–∞–¥–∞` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–∫–ª–∞–¥—É
-   `cluster=–Ω–∞–∑–≤–∞–Ω–∏–µ_–∫–ª–∞—Å—Ç–µ—Ä–∞` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∞—Å—Ç–µ—Ä—É

### –ü—Ä–∏–º–µ—Ä—ã URL:

-   –í—Å–µ —Ç–æ–≤–∞—Ä—ã: `?action=dashboard&activity_filter=all`
-   –ê–∫—Ç–∏–≤–Ω—ã–µ: `?action=dashboard&activity_filter=active`
-   –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ: `?action=dashboard&activity_filter=inactive`
-   –°–∫–ª–∞–¥ –¢–≤–µ—Ä—å: `?action=dashboard&warehouse=–¢–≤–µ—Ä—å`
-   –ö–ª–∞—Å—Ç–µ—Ä –¶–µ–Ω—Ç—Ä: `?action=dashboard&cluster=–¶–µ–Ω—Ç—Ä`

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ –¥–∞—à–±–æ—Ä–¥–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:

-   **~49 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤** (–≤–º–µ—Å—Ç–æ 271)
-   **–†–µ–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–∫–ª–∞–¥–æ–≤** (–≤–º–µ—Å—Ç–æ "–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–∫–ª–∞–¥")
-   **–†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** –ø–æ —Å–∫–ª–∞–¥–∞–º –∏ –∫–ª–∞—Å—Ç–µ—Ä–∞–º
-   **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤

---

_–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª `api/inventory-analytics.php` –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤._
