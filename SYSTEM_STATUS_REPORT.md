# üìä –û—Ç—á–µ—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ ETL —Å–∏—Å—Ç–µ–º—ã MI_CORE_ETL

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 20 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–°–µ—Ä–≤–µ—Ä:** 178.72.129.61  
**SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:** ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

## üéØ –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞.

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π |
|-----------|-------------------|
| –ö–ª–∏–µ–Ω—Ç—ã | 1 |
| –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö | 3 |
| –¢–æ–≤–∞—Ä—ã (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫) | 271 |
| –ó–∞–∫–∞–∑—ã | 5,518 |
| –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ | 17 |
| –û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ | 3 (—Ç–µ—Å—Ç–æ–≤—ã–µ) |
| –î–≤–∏–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ | 4 (—Ç–µ—Å—Ç–æ–≤—ã–µ) |
| –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ | 20 |
| –°—ã—Ä—ã–µ —Å–æ–±—ã—Ç–∏—è | 12,236 |

## üîß –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| Wildberries API | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| Ozon API (–æ—Å–Ω–æ–≤–Ω–æ–π) | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| Ozon API (–æ—Å—Ç–∞—Ç–∫–∏) | ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø |
| –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤/–¥–≤–∏–∂–µ–Ω–∏–π | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| Cron –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è | ‚úÖ –ù–ê–°–¢–†–û–ï–ù–ê |
| –ò–º–ø–æ—Ä—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |

## üìÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

- **–ó–∞–∫–∞–∑—ã:** —Å 2025-09-01 –ø–æ 2025-09-20
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** —Å 2025-09-08 –ø–æ 2025-09-08  
- **–ú–µ—Ç—Ä–∏–∫–∏:** —Å 2025-09-01 –ø–æ 2025-09-20

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞

- **Wildberries —Ç–æ–≤–∞—Ä—ã:** 186 –∑–∞–≥—Ä—É–∂–µ–Ω–æ, 372 –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- **Wildberries –∑–∞–∫–∞–∑—ã:** 1,348 –∑–∞–ø–∏—Å–µ–π
- **Wildberries —Ñ–∏–Ω–∞–Ω—Å—ã:** 3,567 –∑–∞–ø–∏—Å–µ–π, 15,376 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫:** 6 –¥–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

- ‚úÖ **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π ETL:** –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 03:00
- ‚úÖ **–ò–º–ø–æ—Ä—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏:** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 05:00  
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ logs/
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:** UPSERT –ª–æ–≥–∏–∫–∞
- ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã

## üîç –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
1. ‚úÖ **ping 178.72.129.61** - —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω (20% –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ - –Ω–æ—Ä–º–∞)
2. ‚úÖ **nc -zv 178.72.129.61 22** - SSH –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç
3. ‚úÖ **ssh -v vladimir@178.72.129.61** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ

### API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. ‚úÖ **Wildberries API** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ **Ozon API (–æ—Å–Ω–æ–≤–Ω–æ–π)** - /v3/product/list —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚ö†Ô∏è **Ozon API (–æ—Å—Ç–∞—Ç–∫–∏)** - —ç–Ω–¥–ø–æ–∏–Ω—Ç /v3/product/info/stocks –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ –¥–≤–∏–∂–µ–Ω–∏–π
1. ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î** - —Ç–∞–±–ª–∏—Ü—ã inventory –∏ stock_movements —Å–æ–∑–¥–∞–Ω—ã
2. ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** - 3 –æ—Å—Ç–∞—Ç–∫–∞, 4 –¥–≤–∏–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
3. ‚úÖ **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** - –∑–∞–ø—Ä–æ—Å—ã —Å JOIN —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å Ozon API –æ—Å—Ç–∞—Ç–∫–æ–≤** - –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ —Å–±–æ—è—Ö ETL

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç  
3. **–î–∞—à–±–æ—Ä–¥ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏** - –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–¥–∞–∂ –∏ –æ—Å—Ç–∞—Ç–∫–æ–≤
4. **–†–∞—Å—à–∏—Ä–∏—Ç—å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å** - –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª–Ω—ã–π –ø—Ä–∞–π—Å-–ª–∏—Å—Ç

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –∫–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh vladimir@178.72.129.61

# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ ETL —Ü–∏–∫–ª–∞
cd /home/vladimir/mi_core_etl
source venv/bin/activate
python main.py --last-7-days

# –¢–æ–ª—å–∫–æ Wildberries
python main.py --source wb --last-7-days

# –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
python run_aggregation.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python test_inventory_system.py
```

### –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ ETL
tail -f logs/etl_run_*.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏  
tail -f logs/cost_import_*.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ cron –∑–∞–¥–∞—á
crontab -l
```

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ:
- ‚úÖ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö Wildberries
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫  
- ‚úÖ –ò–º–ø–æ—Ä—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ—Ä–µ—à–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - —ç–Ω–¥–ø–æ–∏–Ω—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ Ozon API, –Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.
