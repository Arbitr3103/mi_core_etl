<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug React App</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .error {
        color: red;
        background: #ffe6e6;
        padding: 10px;
        margin: 10px 0;
      }
      .success {
        color: green;
        background: #e6ffe6;
        padding: 10px;
        margin: 10px 0;
      }
      .info {
        color: blue;
        background: #e6f3ff;
        padding: 10px;
        margin: 10px 0;
      }
      pre {
        background: #f5f5f5;
        padding: 10px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h1>

    <div id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

    <h2>–ü—Ä–æ–≤–µ—Ä–∫–∏:</h2>
    <div id="checks"></div>

    <h2>–û—à–∏–±–∫–∏ –∫–æ–Ω—Å–æ–ª–∏:</h2>
    <div id="console-errors"></div>

    <h2>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:</h2>
    <div id="resources"></div>

    <script>
      const statusDiv = document.getElementById("status");
      const checksDiv = document.getElementById("checks");
      const errorsDiv = document.getElementById("console-errors");
      const resourcesDiv = document.getElementById("resources");

      const errors = [];
      const originalConsoleError = console.error;
      console.error = function (...args) {
        errors.push(args.join(" "));
        originalConsoleError.apply(console, args);
        updateErrorsDisplay();
      };

      function addCheck(message, isSuccess) {
        const div = document.createElement("div");
        div.className = isSuccess ? "success" : "error";
        div.textContent = (isSuccess ? "‚úÖ " : "‚ùå ") + message;
        checksDiv.appendChild(div);
      }

      function updateErrorsDisplay() {
        if (errors.length > 0) {
          errorsDiv.innerHTML = "<pre>" + errors.join("\\n") + "</pre>";
        } else {
          errorsDiv.innerHTML = '<div class="success">–û—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
        }
      }

      function checkResources() {
        const resources = performance.getEntriesByType("resource");
        let html = "<ul>";

        resources.forEach((resource) => {
          const status = resource.responseStatus || "unknown";
          const isSuccess = status >= 200 && status < 300;
          const color = isSuccess ? "green" : "red";

          if (resource.name.includes("warehouse-dashboard")) {
            html += `<li style="color: ${color}">
                        <strong>${resource.name}</strong><br>
                        Status: ${status}, Size: ${Math.round(
              resource.transferSize || 0
            )} bytes, 
                        Time: ${Math.round(resource.duration || 0)}ms
                    </li>`;
          }
        });

        html += "</ul>";
        resourcesDiv.innerHTML = html;
      }

      // –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
      setTimeout(() => {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: React –∑–∞–≥—Ä—É–∂–µ–Ω?
        if (typeof React !== "undefined") {
          addCheck("React –∑–∞–≥—Ä—É–∂–µ–Ω", true);
        } else {
          addCheck("React –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω", false);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Root —ç–ª–µ–º–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
        const rootElement = document.getElementById("root");
        if (rootElement) {
          addCheck("Root —ç–ª–µ–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω", true);

          // –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Root —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ?
          if (rootElement.innerHTML.trim()) {
            addCheck("Root —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ", true);
            addCheck(
              "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ: " + rootElement.innerHTML.substring(0, 100) + "...",
              true
            );
          } else {
            addCheck("Root —ç–ª–µ–º–µ–Ω—Ç –ü–£–°–¢–û–ô", false);
          }
        } else {
          addCheck("Root —ç–ª–µ–º–µ–Ω—Ç –ù–ï –Ω–∞–π–¥–µ–Ω", false);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: CSS –∑–∞–≥—Ä—É–∂–µ–Ω?
        const cssLoaded = document.querySelector(
          'link[href*="index-BnGjtDq2.css"]'
        );
        if (cssLoaded) {
          addCheck("CSS —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω –≤ DOM", true);
        } else {
          addCheck("CSS —Ñ–∞–π–ª –ù–ï –Ω–∞–π–¥–µ–Ω –≤ DOM", false);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ 5: –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–∏–ª–∏
        const testDiv = document.createElement("div");
        testDiv.className = "sticky z-50 bg-white";
        document.body.appendChild(testDiv);
        const styles = window.getComputedStyle(testDiv);

        if (styles.position === "sticky") {
          addCheck("Tailwind CSS —Ä–∞–±–æ—Ç–∞–µ—Ç (sticky)", true);
        } else {
          addCheck("Tailwind CSS –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç (sticky)", false);
        }

        if (styles.zIndex === "50") {
          addCheck("Tailwind CSS —Ä–∞–±–æ—Ç–∞–µ—Ç (z-index)", true);
        } else {
          addCheck("Tailwind CSS –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç (z-index)", false);
        }

        document.body.removeChild(testDiv);

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
        checkResources();

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
        statusDiv.innerHTML =
          '<div class="info">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—à–µ.</div>';

        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—à–∏–±–∫–∏
        updateErrorsDisplay();
      }, 3000); // –ñ–¥–µ–º 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
      setInterval(() => {
        const rootElement = document.getElementById("root");
        if (rootElement && rootElement.innerHTML.trim()) {
          statusDiv.innerHTML =
            '<div class="success">‚úÖ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å!</div>';
        }
      }, 2000);
    </script>
  </body>
</html>
