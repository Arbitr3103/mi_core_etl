<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å—Ç—Ä–∞–Ω—ã</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/country-filter.css" />
    <style>
      .integration-demo {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .filter-section {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .filter-group {
        margin-bottom: 20px;
      }

      .filter-label {
        font-weight: 600;
        color: #495057;
        margin-bottom: 8px;
        display: block;
      }

      .form-select,
      .form-control {
        border-radius: 8px;
        border: 2px solid #dee2e6;
        transition: all 0.3s ease;
      }

      .form-select:focus,
      .form-control:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
      }

      .btn-primary {
        background: linear-gradient(135deg, #0d6efd 0%, #0b5ed7 100%);
        border: none;
        border-radius: 8px;
        padding: 10px 20px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(13, 110, 253, 0.4);
      }

      .btn-outline-secondary {
        border-radius: 8px;
        border: 2px solid #6c757d;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .status-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #0d6efd;
      }

      .results-section {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .product-item {
        border: 1px solid #e9ecef;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
        transition: all 0.3s ease;
      }

      .product-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      }

      .product-name {
        color: #0d6efd;
        margin-bottom: 15px;
        font-size: 1.2em;
        font-weight: 600;
      }

      .product-details {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 15px;
      }

      .product-details span {
        background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 500;
      }

      .product-price {
        font-weight: bold;
        color: #198754;
        font-size: 1.2em;
      }

      .no-results {
        text-align: center;
        padding: 60px 20px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 12px;
      }

      .no-results h4 {
        color: #6c757d;
        margin-bottom: 20px;
      }

      .filter-badge {
        display: inline-block;
        background: linear-gradient(135deg, #0d6efd 0%, #0b5ed7 100%);
        color: white;
        padding: 4px 12px;
        border-radius: 15px;
        font-size: 0.85em;
        margin: 2px;
        font-weight: 500;
      }

      .loading-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px;
        color: #6c757d;
      }

      .loading-spinner {
        width: 24px;
        height: 24px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #0d6efd;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 10px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .demo-actions {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin-top: 20px;
      }

      .demo-actions .btn {
        margin: 5px;
      }
    </style>
  </head>
  <body>
    <div class="integration-demo">
      <div class="text-center mb-5">
        <h1 class="display-4 text-primary mb-3">üöó –°–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ ZUZ</h1>
        <p class="lead text-muted">
          –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ —Å—Ç—Ä–∞–Ω–µ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏
          —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
        </p>
      </div>

      <!-- –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ -->
      <div class="status-card">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h5 class="mb-2">üìä –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h5>
            <p class="mb-0" id="integration-status">
              <span class="text-warning"
                >‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤...</span
              >
            </p>
          </div>
          <div class="col-md-4 text-end">
            <div id="results-counter" class="h5 text-primary mb-0">
              –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
          </div>
        </div>
      </div>

      <!-- –°–µ–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
      <div class="filter-section">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3 class="mb-0">üîç –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</h3>
          <button id="reset-filters" class="btn btn-outline-secondary">
            üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã
          </button>
        </div>

        <div class="row">
          <div class="col-lg-3 col-md-6">
            <div class="filter-group">
              <label for="brand-select" class="filter-label"
                >üè≠ –ú–∞—Ä–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</label
              >
              <select id="brand-select" class="form-select">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫—É</option>
                <option value="1">BMW</option>
                <option value="2">Mercedes-Benz</option>
                <option value="3">Audi</option>
                <option value="4">Toyota</option>
                <option value="5">Honda</option>
                <option value="6">Volkswagen</option>
                <option value="7">Ford</option>
              </select>
            </div>
          </div>

          <div class="col-lg-3 col-md-6">
            <div class="filter-group">
              <label for="model-select" class="filter-label">üöô –ú–æ–¥–µ–ª—å</label>
              <select id="model-select" class="form-select">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</option>
                <option value="1">X5</option>
                <option value="2">3 Series</option>
                <option value="3">E-Class</option>
                <option value="4">A4</option>
                <option value="5">Camry</option>
                <option value="6">Civic</option>
                <option value="7">Golf</option>
              </select>
            </div>
          </div>

          <div class="col-lg-2 col-md-6">
            <div class="filter-group">
              <label for="year-select" class="filter-label"
                >üìÖ –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞</label
              >
              <select id="year-select" class="form-select">
                <option value="">–õ—é–±–æ–π –≥–æ–¥</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
                <option value="2019">2019</option>
                <option value="2018">2018</option>
              </select>
            </div>
          </div>

          <div class="col-lg-4 col-md-6">
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ —Å—Ç—Ä–∞–Ω–µ -->
            <div id="country-filter-container"></div>
          </div>
        </div>

        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã -->
        <div class="mt-4">
          <h6 class="text-muted mb-2">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:</h6>
          <div id="active-filters">
            <span class="text-muted fst-italic">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤</span>
          </div>
        </div>
      </div>

      <!-- –°–µ–∫—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
      <div class="results-section">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3 class="mb-0">üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h3>
          <div class="text-muted">
            <small id="search-info">–ì–æ—Ç–æ–≤ –∫ –ø–æ–∏—Å–∫—É</small>
          </div>
        </div>

        <div id="products-list">
          <div class="loading-indicator">
            <div class="loading-spinner"></div>
            <span>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤...</span>
          </div>
        </div>
      </div>

      <!-- –î–µ–º–æ-–¥–µ–π—Å—Ç–≤–∏—è -->
      <div class="demo-actions">
        <h6 class="mb-3">üß™ –î–µ–º–æ-–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h6>
        <button
          class="btn btn-outline-primary btn-sm"
          onclick="demoSelectBMW()"
        >
          –í—ã–±—Ä–∞—Ç—å BMW
        </button>
        <button
          class="btn btn-outline-primary btn-sm"
          onclick="demoSelectToyota()"
        >
          –í—ã–±—Ä–∞—Ç—å Toyota
        </button>
        <button
          class="btn btn-outline-success btn-sm"
          onclick="demoFullFilter()"
        >
          –ü–æ–ª–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
        </button>
        <button class="btn btn-outline-info btn-sm" onclick="showFilterInfo()">
          –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
        </button>
        <button class="btn btn-outline-warning btn-sm" onclick="clearCache()">
          –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
        </button>
      </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="../js/CountryFilter.js"></script>
    <script src="../js/FilterManager.js"></script>
    <script src="../js/FilterManagerIntegration.js"></script>

    <script>
      // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–µ–º–æ-—Ñ—É–Ω–∫—Ü–∏—è–º–∏
      class DemoFilterIntegration extends FilterManagerIntegration {
        constructor(options) {
          super(options);
          this.searchTimeout = null;
        }

        onFiltersChangeCustom(result, filters) {
          // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
          this.updateActiveFiltersDisplay(filters);

          // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–∏—Å–∫–µ
          this.updateSearchInfo(result, filters);

          // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
          this.updateIntegrationStatus();

          // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ–∏—Å–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
          this.simulateSearchDelay();
        }

        updateActiveFiltersDisplay(filters) {
          const activeFiltersElement =
            document.getElementById("active-filters");
          if (!activeFiltersElement) return;

          const activeFilters = this.getActiveFilters();

          if (Object.keys(activeFilters).length === 0) {
            activeFiltersElement.innerHTML =
              '<span class="text-muted fst-italic">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤</span>';
            return;
          }

          const filterLabels = {
            brand_id: "üè≠ –ú–∞—Ä–∫–∞",
            model_id: "üöô –ú–æ–¥–µ–ª—å",
            year: "üìÖ –ì–æ–¥",
            country_id: "üåç –°—Ç—Ä–∞–Ω–∞",
          };

          const filtersHtml = Object.keys(activeFilters)
            .map((key) => {
              const label = filterLabels[key] || key;
              const value = this.getFilterDisplayValue(key, activeFilters[key]);
              return `<span class="filter-badge">${label}: ${value}</span>`;
            })
            .join("");

          activeFiltersElement.innerHTML = filtersHtml;
        }

        getFilterDisplayValue(filterKey, value) {
          // –ü–æ–ª—É—á–∞–µ–º —á–∏—Ç–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
          const displayMaps = {
            brand_id: {
              1: "BMW",
              2: "Mercedes-Benz",
              3: "Audi",
              4: "Toyota",
              5: "Honda",
              6: "Volkswagen",
              7: "Ford",
            },
            model_id: {
              1: "X5",
              2: "3 Series",
              3: "E-Class",
              4: "A4",
              5: "Camry",
              6: "Civic",
              7: "Golf",
            },
          };

          if (
            filterKey === "country_id" &&
            this.getFilterManager().countryFilter
          ) {
            const countryInfo =
              this.getFilterManager().getSelectedCountryInfo();
            return countryInfo ? countryInfo.name : value;
          }

          return displayMaps[filterKey]
            ? displayMaps[filterKey][value] || value
            : value;
        }

        updateSearchInfo(result, filters) {
          const searchInfoElement = document.getElementById("search-info");
          if (!searchInfoElement) return;

          const activeCount = Object.keys(this.getActiveFilters()).length;
          const resultCount = result.data ? result.data.length : 0;

          if (activeCount === 0) {
            searchInfoElement.textContent = "–ì–æ—Ç–æ–≤ –∫ –ø–æ–∏—Å–∫—É";
          } else {
            searchInfoElement.textContent = `–ù–∞–π–¥–µ–Ω–æ ${resultCount} —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ ${activeCount} —Ñ–∏–ª—å—Ç—Ä–∞–º`;
          }
        }

        updateIntegrationStatus() {
          const statusElement = document.getElementById("integration-status");
          if (!statusElement) return;

          const isReady = this.isReady();
          const hasFilters = this.hasActiveFilters();

          let statusHtml = "";
          if (!isReady) {
            statusHtml =
              '<span class="text-warning">‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤...</span>';
          } else if (hasFilters) {
            statusHtml =
              '<span class="text-success">‚úÖ –§–∏–ª—å—Ç—Ä—ã –∞–∫—Ç–∏–≤–Ω—ã, –ø–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω</span>';
          } else {
            statusHtml =
              '<span class="text-info">üîç –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ</span>';
          }

          statusElement.innerHTML = statusHtml;
        }

        simulateSearchDelay() {
          const productsElement = document.getElementById("products-list");
          if (!productsElement) return;

          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
          productsElement.innerHTML = `
                    <div class="loading-indicator">
                        <div class="loading-spinner"></div>
                        <span>–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...</span>
                    </div>
                `;

          // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É
          clearTimeout(this.searchTimeout);
          this.searchTimeout = setTimeout(() => {
            this.showDemoResults();
          }, 800);
        }

        showDemoResults() {
          const activeFilters = this.getActiveFilters();
          const hasFilters = Object.keys(activeFilters).length > 0;

          if (!hasFilters) {
            this.showWelcomeMessage();
            return;
          }

          // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–µ–º–æ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
          const demoProducts = this.generateDemoProducts(activeFilters);
          this.updateResults({
            data: demoProducts,
            pagination: { total: demoProducts.length },
          });
        }

        showWelcomeMessage() {
          const productsElement = document.getElementById("products-list");
          if (!productsElement) return;

          productsElement.innerHTML = `
                    <div class="no-results">
                        <h4>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É —Ñ–∏–ª—å—Ç—Ä–æ–≤ ZUZ!</h4>
                        <p class="text-muted mb-4">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤—ã—à–µ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø—Ä–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="demoSelectBMW()">
                                üöó –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å BMW
                            </button>
                            <button class="btn btn-outline-primary" onclick="demoSelectToyota()">
                                üöô –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å Toyota
                            </button>
                        </div>
                    </div>
                `;
        }

        generateDemoProducts(filters) {
          const products = [];
          const brandNames = {
            1: "BMW",
            2: "Mercedes-Benz",
            3: "Audi",
            4: "Toyota",
            5: "Honda",
            6: "Volkswagen",
            7: "Ford",
          };
          const modelNames = {
            1: "X5",
            2: "3 Series",
            3: "E-Class",
            4: "A4",
            5: "Camry",
            6: "Civic",
            7: "Golf",
          };

          const brandName = brandNames[filters.brand_id] || "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è";
          const modelName = modelNames[filters.model_id] || "–º–æ–¥–µ–ª—å";
          const year = filters.year || "2020-2024";
          const country = filters.country_id ? "–ì–µ—Ä–º–∞–Ω–∏—è" : "–†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã";

          // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 3-5 —Ç–æ–≤–∞—Ä–æ–≤
          const productCount = Math.floor(Math.random() * 3) + 3;

          for (let i = 1; i <= productCount; i++) {
            products.push({
              id: i,
              product_name: `ZUZ –ü—Ä–æ—Å—Ç–∞–≤–∫–∞ ${brandName} ${modelName} ${year} - –ö–æ–º–ø–ª–µ–∫—Ç ${i}`,
              brand_name: brandName,
              model_name: modelName,
              country_name: country,
              year: year,
              cost_price: Math.floor(Math.random() * 5000) + 2000,
              description: `–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ—Å—Ç–∞–≤–∫–∞ –¥–ª—è ${brandName} ${modelName}. –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏–∑ –ø—Ä–æ—á–Ω–æ–≥–æ –∞–ª—é–º–∏–Ω–∏–µ–≤–æ–≥–æ —Å–ø–ª–∞–≤–∞.`,
            });
          }

          return products;
        }
      }

      // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      let demoIntegration = null;

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      document.addEventListener("DOMContentLoaded", function () {
        demoIntegration = new DemoFilterIntegration({
          apiBaseUrl: "/api",
        });

        window.demoIntegration = demoIntegration;
        window.filterIntegration = demoIntegration;

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
        setTimeout(() => {
          demoIntegration.updateIntegrationStatus();
          demoIntegration.showWelcomeMessage();
        }, 1000);
      });

      // –î–µ–º–æ-—Ñ—É–Ω–∫—Ü–∏–∏
      function demoSelectBMW() {
        if (!demoIntegration) return;

        document.getElementById("brand-select").value = "1";
        demoIntegration.setFilter("brand_id", "1");

        setTimeout(() => {
          document.getElementById("model-select").value = "1";
          demoIntegration.setFilter("model_id", "1");
        }, 500);
      }

      function demoSelectToyota() {
        if (!demoIntegration) return;

        document.getElementById("brand-select").value = "4";
        demoIntegration.setFilter("brand_id", "4");

        setTimeout(() => {
          document.getElementById("model-select").value = "5";
          demoIntegration.setFilter("model_id", "5");
        }, 500);
      }

      function demoFullFilter() {
        if (!demoIntegration) return;

        document.getElementById("brand-select").value = "3";
        document.getElementById("model-select").value = "4";
        document.getElementById("year-select").value = "2023";

        demoIntegration.setFilter("brand_id", "3");
        setTimeout(() => demoIntegration.setFilter("model_id", "4"), 200);
        setTimeout(() => demoIntegration.setFilter("year", "2023"), 400);
        setTimeout(() => demoIntegration.setFilter("country_id", "1"), 600);
      }

      function showFilterInfo() {
        if (!demoIntegration) return;

        const info = {
          ready: demoIntegration.isReady(),
          currentFilters: demoIntegration.getCurrentFilters(),
          activeFilters: demoIntegration.getActiveFilters(),
          hasActiveFilters: demoIntegration.hasActiveFilters(),
          availableCountries: demoIntegration
            .getFilterManager()
            .getAvailableCountries().length,
        };

        alert(
          "üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤:\n\n" +
            JSON.stringify(info, null, 2)
        );
      }

      function clearCache() {
        if (!demoIntegration) return;

        demoIntegration.getFilterManager().clearCache();
        alert("üóëÔ∏è –ö—ç—à –æ—á–∏—â–µ–Ω —É—Å–ø–µ—à–Ω–æ!");
      }

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
      window.addEventListener("error", function (e) {
        console.error("–û—à–∏–±–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:", e.error);
      });
    </script>
  </body>
</html>
