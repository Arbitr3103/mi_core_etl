# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Ozon v4 API —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º API

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ —Å Ozon, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–æ–≤—ã–µ API endpoints –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API (v4)

- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –Ω–∞ `POST /v4/product/info/stocks`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (product_id, offer_id, stocks[])
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ SKU –∏–∑ –ø–æ–ª—è `stocks[].sku`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–∫–ª–∞–¥–æ–≤: fbo, fbs, realFbs

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ API

- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ `POST /v2/analytics/stock_on_warehouses`
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ **27 —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Å–∫–ª–∞–¥–∞–º**
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç—Ä–∏–∫: promised_amount, free_to_sell_amount, reserved_amount
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö SKU –æ—Ç Ozon
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ "Ozon_Analytics" –≤ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ "—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–∞—Ö"
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏–∑ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ API

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ API
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ–¥–Ω–æ–≥–æ –∏–∑ API

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **175 —Ç–æ–≤–∞—Ä–æ–≤** –ø–æ–ª—É—á–µ–Ω–æ —á–µ—Ä–µ–∑ v4 API
- **511 –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π** –ø–æ–ª—É—á–µ–Ω–æ —á–µ—Ä–µ–∑ analytics API
- **27 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤** —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- **0 –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **471 –∑–∞–ø–∏—Å—å** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ —Å–∫–ª–∞–¥–∞–º

### –ì–µ–æ–≥—Ä–∞—Ñ–∏—è —Å–∫–ª–∞–¥–æ–≤

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–∫–ª–∞–¥–∞–º –≤:

- –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ (–°–ü–ë*–ë–£–ì–†–´*–†–§–¶, –°–ü–ë*–ö–û–õ–ü–ò–ù–û*–†–§–¶, –°–∞–Ω–∫—Ç*–ü–µ—Ç–µ—Ä–±—É—Ä–≥*–†–§–¶)
- –ú–æ—Å–∫–≤–∞ –∏ –æ–±–ª–∞—Å—Ç—å (–î–û–ú–û–î–ï–î–û–í–û*–†–§–¶, –ù–û–ì–ò–ù–°–ö*–†–§–¶, –ü–£–®–ö–ò–ù–û*1*–†–§–¶, –•–û–†–£–ì–í–ò–ù–û_–†–§–¶)
- –†–µ–≥–∏–æ–Ω—ã –†–æ—Å—Å–∏–∏ (–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ö–∞–∑–∞–Ω—å, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –°–∞–º–∞—Ä–∞, –¢—é–º–µ–Ω—å, –£—Ñ–∞, –∏ –¥—Ä.)
- –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Å–∫–ª–∞–¥—ã (–ú–ò–ù–°–ö*–ú–ü–°–¶, –ï–†–ï–í–ê–ù*–ú–†–§–¶)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### API Endpoints

```
–û—Å–Ω–æ–≤–Ω–æ–π API:    POST /v4/product/info/stocks
–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π:   POST /v2/analytics/stock_on_warehouses
–°–∫–ª–∞–¥—ã:          GET /v1/warehouse/list
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```json
{
  "main_api": {
    "product_id": 123456,
    "offer_id": "SKU-123",
    "stocks": [
      {
        "type": "fbo",
        "present": 10,
        "reserved": 2,
        "sku": "161875896"
      }
    ]
  },
  "analytics_api": {
    "sku": "161875896",
    "warehouse_name": "–°–∞–Ω–∫—Ç_–ü–µ—Ç–µ—Ä–±—É—Ä–≥_–†–§–¶",
    "promised_amount": 12,
    "free_to_sell_amount": 8,
    "reserved_amount": 0
  }
}
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–¢–∞–±–ª–∏—Ü–∞ `inventory_data` —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç:

- **–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: source='Ozon' (175 –∑–∞–ø–∏—Å–µ–π)
- **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**: source='Ozon_Analytics' (471 –∑–∞–ø–∏—Å—å)
- **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º**: warehouse_name —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- **–¢–∏–ø—ã –æ—Å—Ç–∞—Ç–∫–æ–≤**: stock_type ('FBO', 'analytics', –∏ –¥—Ä.)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```bash
# –¢–µ—Å—Ç API
python3 web_inventory_sync_v4.py test

# –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
python3 web_inventory_sync_v4.py sync
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

```sql
-- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
SELECT warehouse_name, stock_type, COUNT(*)
FROM inventory_data
WHERE source = 'Ozon'
GROUP BY warehouse_name, stock_type;

-- –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–∫–ª–∞–¥–∞–º
SELECT warehouse_name, COUNT(*)
FROM inventory_data
WHERE source = 'Ozon_Analytics'
GROUP BY warehouse_name
ORDER BY COUNT(*) DESC;
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **API –∑–∞–ø—Ä–æ—Å—ã**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ENDPOINT_USAGE –ª–æ–≥–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: 0 –æ—à–∏–±–æ–∫, –º–∏–Ω–∏–º—É–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Å–∫–ª–∞–¥–æ–≤**: 27 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤
- **–í—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**: ~2-3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

### –õ–æ–≥–∏

```
‚úÖ API –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω: /v4/product/info/stocks, —Å—Ç–∞—Ç—É—Å=200, –≤—Ä–µ–º—è=0.67—Å
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 511 –∑–∞–ø–∏—Å–µ–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 511 –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑ 511 —Å–∫–ª–∞–¥—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ: –æ–±–Ω–æ–≤–ª–µ–Ω–æ 0, –≤—Å—Ç–∞–≤–ª–µ–Ω–æ 471, –æ—à–∏–±–æ–∫ 0
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è v4 API —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º API **–ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å–ø–µ—à–Ω–∞**:

1. **–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø–æ–ª—É—á–∞–µ–º –æ—Å—Ç–∞—Ç–∫–∏ —á–µ—Ä–µ–∑ v4 API
2. **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç** - 27 —Å–∫–ª–∞–¥–æ–≤ —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞** - –Ω–µ—Ç –ª–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫
4. **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ, –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ
5. **–°–∏—Å—Ç–µ–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞** - –≥–æ—Ç–æ–≤–∞ –∫ —Ä–æ—Å—Ç—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —Å–∫–ª–∞–¥–æ–≤

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –æ—Å—Ç–∞—Ç–∫–æ–≤** —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å–∫–ª–∞–¥–∞–º –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏ –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º –ª–æ–∫–∞—Ü–∏—è–º, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–π.

---

_–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 08 –æ–∫—Ç—è–±—Ä—è 2025_  
_–°—Ç–∞—Ç—É—Å: ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ_
