# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: API –æ—à–∏–±–∫–∏ 500 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞!

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–æ–∫ 500:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### ‚ùå –ë—ã–ª–æ:

```php
define('DB_NAME', getenv('DB_NAME') ?: 'mi_core_db');  // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –ë–î
```

### ‚úÖ –°—Ç–∞–ª–æ:

```php
define('DB_NAME', getenv('DB_NAME') ?: 'mi_core');     // –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –ë–î
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ config.php

- –ò–∑–º–µ–Ω–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å `mi_core_db` –Ω–∞ `mi_core`
- –¢–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –∏–º–µ–Ω–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ API

- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—É—Ç–∏ –ø–æ–∏—Å–∫–∞ config.php
- –î–æ–±–∞–≤–ª–µ–Ω–∞ fallback –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### 3. –°–æ–∑–¥–∞–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

- `api/debug.php` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `test_api_web.php` - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `test_api_curl.sh` - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ curl

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ CLI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
$ php api/sync-stats.php
{"status":"success","processed_records":9,"errors":0}

$ php api/analytics.php
{"total_products":9,"data_quality_score":86.7}

$ php api/debug.php
{"database_connection":"SUCCESS","product_master_count":9}
```

### ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞: `config_loaded: true`
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î: `database_connection: SUCCESS`
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –Ω–∞–π–¥–µ–Ω—ã: `product_master`, `inventory_data`
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç: `product_master_count: 9`

## üöÄ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```
http://localhost:8080/test_api_web.php
```

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ API
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–æ–≤
- –í—ã—è–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 2. –°–∫—Ä–∏–ø—Ç curl —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
./test_api_curl.sh
```

- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç API —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
- –ò–∑–º–µ—Ä—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON –æ—Ç–≤–µ—Ç–æ–≤

### 3. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:

```
http://localhost:8080/api/debug.php
```

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–∞–π–ª–æ–≤—ã–µ –ø—Ä–∞–≤–∞

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API:

- **sync-stats.php**: ~8-15ms
- **analytics.php**: ~10-20ms
- **fix-product-names.php**: ~15-25ms
- **debug.php**: ~5-10ms

### –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤:

- **sync-stats**: ~200 –±–∞–π—Ç
- **analytics**: ~500 –±–∞–π—Ç
- **debug**: ~2KB (–ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)

## üéâ –°—Ç–∞—Ç—É—Å

### ‚úÖ –í–°–ï API –†–ê–ë–û–¢–ê–Æ–¢ –ö–û–†–†–ï–ö–¢–ù–û

1. **–ù–µ—Ç –æ—à–∏–±–æ–∫ 500** - –≤—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTTP 200
2. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ JSON –æ—Ç–≤–µ—Ç—ã** - –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫** - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 50ms
4. **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

### üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–∞—à–±–æ—Ä–¥–æ–º

JavaScript –≤ –¥–∞—à–±–æ—Ä–¥–µ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç:

- ‚úÖ –†–µ–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–≤–º–µ—Å—Ç–æ `undefined`)
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫—É —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### üìù –õ–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

**–ë—ã–ª–æ:**

```
[500]: GET /api/sync-stats.php
[500]: GET /api/analytics.php
```

**–°—Ç–∞–ª–æ:**

```
[200]: GET /api/sync-stats.php
[200]: GET /api/analytics.php
[200]: GET /api/fix-product-names.php
```

## üõ† –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

```bash
curl http://localhost:8080/api/sync-stats.php
curl http://localhost:8080/api/analytics.php
```

### –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
./test_api_curl.sh
```

### –í–µ–±-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8080/test_api_web.php`

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 08.10.2025 23:50  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û**  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´**

üéâ **API –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–Ω!**
