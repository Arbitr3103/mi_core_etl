# План реализации отображения полных списков товаров

- [x] 1. Обновить API для поддержки полных списков товаров

  - Модифицировать `/api/inventory-analytics.php` для добавления параметра `limit`
  - Добавить логику возврата всех товаров при `limit=all`
  - Оптимизировать SQL запросы для обработки больших списков
  - Добавить валидацию параметра limit (только 'all' или числовые значения)
  - _Требования: 1.1, 2.1, 3.1_

- [x] 2. Создать JavaScript контроллер для управления отображением

  - [x] 2.1 Реализовать класс InventoryDisplayController

    - Создать основную структуру класса с методами переключения режимов
    - Добавить инициализацию обработчиков событий для кнопок переключения
    - Реализовать сохранение пользовательских предпочтений в localStorage
    - _Требования: 4.1, 4.2, 4.3, 4.4_

  - [x] 2.2 Добавить методы загрузки и отображения данных

    - Реализовать асинхронную загрузку данных с API
    - Создать метод renderProducts для отображения списков товаров
    - Добавить обновление счетчиков товаров в зависимости от режима
    - _Требования: 1.4, 2.3, 3.3_

  - [x] 2.3 Реализовать обработку ошибок и индикаторы загрузки
    - Добавить показ ошибок при неудачной загрузке данных
    - Создать индикаторы загрузки для улучшения UX
    - Реализовать таймауты для запросов к API
    - _Требования: 5.5_

- [x] 3. Обновить HTML структуру дашборда

  - [x] 3.1 Добавить элементы управления отображением

    - Создать заголовки секций с переключателями режимов
    - Добавить счетчики товаров для каждой категории
    - Реализовать контейнеры для списков товаров с data-атрибутами
    - _Требования: 1.4, 2.3, 3.3, 4.1_

  - [x] 3.2 Обновить структуру отображения товаров
    - Модифицировать HTML разметку для компактного отображения
    - Добавить grid-layout для товаров с колонками SKU, название, остаток, склад
    - Создать контейнеры с поддержкой прокрутки для больших списков
    - _Требования: 1.2, 2.2, 3.2, 5.4_

- [x] 4. Создать CSS стили для компактного отображения

  - [x] 4.1 Реализовать стили для компактного режима

    - Создать CSS класс `.compact-mode` с уменьшенным шрифтом (12px)
    - Добавить grid-layout для товаров с оптимальными пропорциями колонок
    - Реализовать чередование цветов строк для лучшего восприятия
    - _Требования: 1.2, 1.3, 5.2_

  - [x] 4.2 Добавить стили для переключателей и счетчиков

    - Создать стили для кнопок переключения режимов отображения
    - Добавить стили для счетчиков товаров
    - Реализовать hover-эффекты и активные состояния
    - _Требования: 4.1, 4.2, 4.3_

  - [x] 4.3 Оптимизировать стили для прокрутки и навигации
    - Добавить фиксированную высоту контейнеров с вертикальной прокруткой
    - Создать стили для индикаторов загрузки
    - Реализовать адаптивные стили для мобильных устройств
    - _Требования: 2.4, 5.4, 5.5_

- [x] 5. Интегрировать новую функциональность в существующий дашборд

  - [x] 5.1 Обновить основной файл дашборда

    - Подключить новый JavaScript контроллер к `inventory_marketing_dashboard.php`
    - Добавить новые CSS стили в основной файл стилей
    - Обновить инициализацию дашборда для работы с новым контроллером
    - _Требования: 1.1, 2.1, 3.1_

  - [x] 5.2 Обеспечить совместимость с существующим функционалом
    - Проверить работу с существующими фильтрами и сортировкой
    - Убедиться в корректной работе автообновления данных
    - Протестировать интеграцию с системой уведомлений
    - _Требования: 4.4, 5.1, 5.2, 5.3_

- [x] 6. Добавить оптимизацию производительности

  - [x] 6.1 Реализовать кэширование данных

    - Добавить кэширование API ответов в localStorage на 5 минут
    - Создать механизм инвалидации кэша при обновлении данных
    - Реализовать дебаунсинг для переключения режимов отображения
    - _Требования: 1.1, 4.3_

  - [x] 6.2 Оптимизировать отображение больших списков
    - Добавить виртуализацию для списков более 100 товаров
    - Реализовать ленивую загрузку элементов при прокрутке
    - Создать оптимизированные SQL запросы с правильными индексами
    - _Требования: 2.4, 5.4_

- [ ]\* 7. Создать тесты для новой функциональности
  - Написать unit тесты для JavaScript контроллера
  - Добавить интеграционные тесты для API endpoints
  - Создать тесты производительности для больших списков товаров
  - Добавить тесты совместимости для разных браузеров
  - _Требования: 1.1, 2.1, 3.1, 4.1_
