# Требования: Разделение товаров на активные и неактивные

## Введение

Необходимо реализовать функциональность разделения товаров в дашборде на активные (остаток > 0) и неактивные (остаток = 0) для улучшения управления складскими запасами.

## Глоссарь

-   **Активный товар**: Товар с общим остатком больше 0 на всех складах
-   **Неактивный товар**: Товар с общим остатком равным 0 на всех складах
-   **Общий остаток**: Сумма всех типов остатков товара (quantity_present + available + preparing_for_sale + in_requests + in_transit)
-   **Дашборд**: Веб-интерфейс для просмотра складских остатков
-   **PostgreSQL**: База данных с информацией об остатках товаров

## Требования

### Требование 1: Анализ структуры данных остатков

**Пользовательская история:** Как разработчик, я хочу понять структуру данных остатков в PostgreSQL, чтобы правильно реализовать логику разделения товаров.

#### Критерии приемки

1. WHEN анализируется база данных, THE система SHALL определить все поля остатков в таблице inventory
2. THE система SHALL проверить наличие полей quantity_present, available, preparing_for_sale, in_requests, in_transit
3. THE система SHALL создать тестовый скрипт для проверки подключения к PostgreSQL
4. THE система SHALL выполнить анализ распределения остатков по товарам

### Требование 2: Исправление подключения к базе данных

**Пользовательская история:** Как системный администратор, я хочу исправить ошибки подключения к базе данных, чтобы скрипты анализа работали корректно.

#### Критерии приемки

1. THE система SHALL исправить ошибку "Undefined variable $pdo" в check_inventory_stats.php
2. THE система SHALL использовать корректный файл конфигурации PostgreSQL
3. WHEN выполняется скрипт проверки, THE система SHALL успешно подключаться к базе данных
4. THE система SHALL выводить статистику по остаткам без ошибок

### Требование 3: Реализация логики активности товаров

**Пользовательская история:** Как менеджер склада, я хочу видеть разделение товаров на активные и неактивные, чтобы фокусироваться на товарах с остатками.

#### Критерии приемки

1. THE система SHALL вычислять общий остаток как сумму всех полей остатков
2. WHEN общий остаток больше 0, THE система SHALL классифицировать товар как активный
3. WHEN общий остаток равен 0, THE система SHALL классифицировать товар как неактивный
4. THE система SHALL обновить API для возврата статуса активности товара

### Требование 4: Обновление дашборда с фильтрацией

**Пользовательская история:** Как пользователь дашборда, я хочу фильтровать товары по активности, чтобы быстро находить нужную информацию.

#### Критерии приемки

1. THE дашборд SHALL отображать кнопки фильтрации "Все", "Активные", "Неактивные"
2. WHEN выбран фильтр "Активные", THE дашборд SHALL показывать только товары с остатком > 0
3. WHEN выбран фильтр "Неактивные", THE дашборд SHALL показывать только товары с остатком = 0
4. THE дашборд SHALL отображать корректную статистику для каждого фильтра

### Требование 5: Визуальное различение товаров

**Пользовательская история:** Как пользователь дашборда, я хочу визуально различать активные и неактивные товары, чтобы быстро ориентироваться в данных.

#### Критерии приемки

1. THE дашборд SHALL выделять неактивные товары красным цветом или специальным значком
2. THE дашборд SHALL выделять активные товары зеленым цветом или обычным отображением
3. THE дашборд SHALL показывать общий остаток в отдельной колонке
4. WHEN остаток равен 0, THE система SHALL выделять значение специальным стилем
