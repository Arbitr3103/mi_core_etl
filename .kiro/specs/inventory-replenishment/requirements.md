# Requirements Document

## Introduction

Данная спецификация описывает требования к системе автоматических заявок на пополнение склада. Система будет анализировать текущие остатки, скорость продаж за последнюю неделю и генерировать рекомендации по пополнению запасов для предотвращения stockout и оптимизации закупок.

## Requirements

### Requirement 1

**User Story:** Как менеджер по закупкам, я хочу получать автоматические рекомендации по пополнению склада, чтобы не допускать дефицита товаров и оптимизировать объемы закупок.

#### Acceptance Criteria

1. WHEN система анализирует остатки товаров THEN она SHALL рассчитывать скорость продаж за последние 7 дней
2. WHEN скорость продаж рассчитана THEN система SHALL прогнозировать количество дней до исчерпания запасов
3. WHEN прогноз показывает менее 7 дней до исчерпания THEN система SHALL генерировать рекомендацию по пополнению

### Requirement 2

**User Story:** Как менеджер склада, я хочу видеть детальную аналитику по каждому товару, чтобы принимать обоснованные решения о закупках.

#### Acceptance Criteria

1. WHEN система генерирует рекомендацию THEN она SHALL показывать текущий остаток товара
2. WHEN система анализирует товар THEN она SHALL рассчитывать среднедневные продажи за 7, 14 и 30 дней
3. WHEN система формирует отчет THEN она SHALL включать информацию о последней дате продажи товара

### Requirement 3

**User Story:** Как руководитель отдела закупок, я хочу получать приоритизированный список товаров для пополнения, чтобы эффективно планировать бюджет и поставки.

#### Acceptance Criteria

1. WHEN система генерирует список рекомендаций THEN она SHALL сортировать товары по критичности (дни до исчерпания)
2. WHEN товар имеет высокую скорость продаж THEN система SHALL присваивать ему высокий приоритет
3. WHEN система рассчитывает рекомендуемый объем THEN она SHALL учитывать сезонность и тренды продаж

### Requirement 4

**User Story:** Как аналитик, я хочу видеть метрики эффективности управления запасами, чтобы оптимизировать процессы закупок.

#### Acceptance Criteria

1. WHEN система анализирует товары THEN она SHALL рассчитывать оборачиваемость запасов
2. WHEN система формирует отчет THEN она SHALL показывать товары с избыточными запасами
3. WHEN система анализирует эффективность THEN она SHALL выявлять медленно движущиеся товары

### Requirement 5

**User Story:** Как менеджер по продажам, я хочу получать уведомления о критических остатках, чтобы своевременно корректировать продажную стратегию.

#### Acceptance Criteria

1. WHEN остаток товара критически низкий THEN система SHALL отправлять уведомление
2. WHEN товар не продавался более 30 дней THEN система SHALL помечать его как неликвидный
3. WHEN система обнаруживает аномалии в продажах THEN она SHALL генерировать алерт

### Requirement 6

**User Story:** Как система, я должна интегрироваться с существующими данными, чтобы обеспечить точность расчетов и рекомендаций.

#### Acceptance Criteria

1. WHEN система запускается THEN она SHALL использовать актуальные данные из таблицы inventory
2. WHEN система анализирует продажи THEN она SHALL использовать данные из fact_orders за указанный период
3. WHEN система генерирует рекомендации THEN она SHALL сохранять результаты в новую таблицу replenishment_recommendations
